; Jacking in...
; Connecting using "deps.edn" project type.
; Starting Jack-in: (cd /usr/src/app; clojure -Sdeps '{:deps {nrepl/nrepl {:mvn/version,"1.5.1"},cider/cider-nrepl {:mvn/version,"0.58.0"}}}' -M:dev)
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
nil
clj꞉user꞉> 
nil
clj꞉user꞉> 
#'user/start
clj꞉user꞉> 
; 2026-01-22T06:26:19.324Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; 2026-01-22T06:26:19.637Z 32f3b319732d INFO [user:10] - Server started at http://localhost:3000
nil
clj꞉user꞉> 
; 2026-01-22T06:27:30.231Z 32f3b319732d INFO [user:16] - Server stopped
; 2026-01-22T06:27:30.236Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; 2026-01-22T06:27:30.248Z 32f3b319732d INFO [user:10] - Server started at http://localhost:3000
nil
clj꞉user꞉> 
; REPL history clearedclj꞉user꞉> 2000M
clj꞉lms.waterfall-test꞉> 2000M
2000M
clj꞉lms.waterfall-test꞉> 
; 2026-01-22T08:23:17.763Z 32f3b319732d INFO [user:16] - Server stopped
nil
clj꞉user꞉> 
nil
clj꞉user꞉> 
; 2026-01-22T10:18:46.174Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
; 2026-01-22T10:18:49.918Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
; 2026-01-22T10:18:53.818Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
nil
clj꞉user꞉> 
nil
clj꞉user꞉> 
#'user/start
clj꞉user꞉> 
#'user/stop
clj꞉user꞉> 
#'user/restart
clj꞉user꞉> 
; 2026-01-22T10:19:21.122Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
nil
clj꞉user꞉> 
; 2026-01-22T10:19:28.295Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
; 2026-01-22T10:20:19.326Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
; 2026-01-22T10:21:59.747Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
nil
clj꞉user꞉> 
#'user/start
clj꞉user꞉> 
#'user/stop
clj꞉user꞉> 
#'user/restart
clj꞉user꞉> 
; 2026-01-22T10:23:36.701Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
; 2026-01-22T10:26:22.153Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉user꞉> 
nil
clj꞉user꞉> 
#'user/start
clj꞉user꞉> 
; 2026-01-22T10:29:28.999Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3001
; 2026-01-22T10:29:29.076Z 32f3b319732d INFO [user:15] - Server started at http://localhost:3001
nil
clj꞉user꞉> 
; 2026-01-22T10:29:39.531Z 32f3b319732d INFO [user:21] - Server stopped
nil
clj꞉user꞉> 
; 2026-01-22T10:29:51.127Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
; 2026-01-22T10:30:09.454Z 32f3b319732d INFO [lms.core:83] - Starting server on port 3000
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
; Evaluating file: core.clj
nil
clj꞉lms.core꞉> 
; 2026-01-23T11:44:20.116Z 32f3b319732d INFO [lms.core:93] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T11:44:25.146Z 32f3b319732d INFO [lms.handlers:34] - Database schema installed
; 2026-01-23T11:44:25.176Z 32f3b319732d INFO [lms.handlers:60] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T11:44:27.385Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:44:42.325Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:44:45.514Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:44:46.339Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:44:50.226Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 100000M, :reference "pay-1"}
; 2026-01-23T11:44:50.280Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:46:33.903Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:54:09.334Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        ;90morg.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      0morg.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/;33;1mhandle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:54:10.406Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/;33;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:54:16.519Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 100000M, :reference "pay-2"}
; 2026-01-23T11:54:16.551Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
nil
clj꞉lms.core꞉> 
; 2026-01-23T11:54:52.863Z 32f3b319732d INFO [lms.core:93] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T11:55:29.787Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:55:39.777Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        ;90morg.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      0morg.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/;33;1mhandle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:55:43.368Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 100000M, :reference "pay-3"}
; 2026-01-23T11:55:43.398Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:56:41.825Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:56:48.527Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  87
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T11:56:51.367Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 10000M, :reference "pay-4"}
; 2026-01-23T11:56:51.381Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
nil
clj꞉lms.core꞉> 
; 2026-01-23T11:57:04.013Z 32f3b319732d INFO [lms.core:93] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T11:57:17.777Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 10000M, :reference "pay-5"}
; 2026-01-23T11:57:17.803Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:57:35.500Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 10000M, :reference "pay-5"}
; 2026-01-23T11:57:35.563Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:57:36.992Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 10000M, :reference "pay-5"}
; 2026-01-23T11:57:37.017Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:57:37.166Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 10000M, :reference "pay-5"}
; 2026-01-23T11:57:37.183Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:57:43.135Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T11:57:44.099Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
(require '[lms.operations :as ops] :reload)
nil
clj꞉lms.core꞉> 
(require '[lms.handlers :as handlers] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:01:16.267Z 32f3b319732d INFO [lms.handlers:35] - Database schema installed
; 2026-01-23T12:01:16.284Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:01:21.206Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/;33;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj: 100
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T12:01:22.240Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj: 100
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T12:01:27.083Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 10000M, :reference "pay-6"}
; 2026-01-23T12:01:27.198Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:01:36.784Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
(require '[lms.handlers :as handlers] :reload)
(require '[lms.views :as views] :reload)
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:06:07.610Z 32f3b319732d INFO [lms.handlers:35] - Database schema installed
; 2026-01-23T12:06:07.636Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:06:11.702Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj: 100
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
; 2026-01-23T12:06:16.628Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 1000M, :reference "pay-7"}
; 2026-01-23T12:06:16.705Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
(require '[lms.operations :as ops] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:09:30.891Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:09:34.557Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj:  97
;                                                                      datomic.client.api/q                         api.clj: 410
;                                                                      datomic.client.api/q                         api.clj: 466
;                                                                      datomic.client.api/q                         api.clj: 464
;                                                            datomic.client.api.impl/call-q                        impl.clj: 151
;                                                              datomic.client.api.impl/fn/G                        impl.clj:  41
;                                                                  datomic.core.local-db/fn                    local_db.clj:  28
;                                                          datomic.core.local-query/local-q                 local_query.clj:  57
;                                             datomic.query.support/disallow-find-variants!                     support.clj:  40
;                                                          datomic.query.support/incorrect!                     support.clj:  21
; clojure.lang.ExceptionInfo: Only find-rel elements are allowed in client :find
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "Only find-rel elements are allowed in client :find"
; 
; 

(require '[lms.operations :as ops] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:10:24.804Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:10:28.505Z 32f3b319732d ERROR [lms.handlers:158] - Error previewing payment
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      0morg.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                      lms.handlers/preview-payment-handler                    handlers.clj: 149
;                                                            lms.operations/preview-payment                  operations.clj: 111
;                                                                   datomic.client.api/with                         api.clj: 408
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  67
;                                                                   datomic.core.db.Db/with                          db.clj:2229
;                                                              datomic.core.db/with-tx+opts                          db.clj:3591
;                                                                   datomic.core.db/with-tx                          db.clj:3576
;                                                          datomic.core.db/add-ensured-data                          db.clj:3556
;                                                                datomic.core.db.Db/addData                          db.clj:2400
;                                                                         clojure.core/conj                        core.clj:  87
;                                                                                       ...
;                                                    datomic.dev-local.btindex.BTIndex/cons                     btindex.clj: 281
;                                                                                       ...
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 397
; java.lang.ClassCastException: class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
; 
; 
(require '[lms.operations :as ops] :reload)
(require '[lms.handlers :as handlers] :reload)
(require '[lms.views :as views] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:25:39.492Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-23T12:25:39.507Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:25:53.087Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-23T12:25:53.102Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:25:54.454Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:26:44.039Z 32f3b319732d INFO [lms.handlers:183] - Payment recorded {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :amount 50000M, :reference "123ffds"}
; 2026-01-23T12:26:44.074Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:26:47.390Z 32f3b319732d INFO [lms.handlers:106] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
(require '[lms.views :as views] 
         '[lms.handlers :as handlers] 
         '[lms.core :as core] 
         :reload-all)
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:31:42.879Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T12:31:46.981Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-23T12:31:46.990Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T12:31:48.705Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:32:09.201Z 32f3b319732d ERROR [lms.handlers:259] - Error retracting transaction
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         ;90morg.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      morg.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                  lms.handlers/retract-transaction-handler                    handlers.clj: 244
;                                                        lms.operations/retract-transaction                  operations.clj: 186
;                                                               datomic.client.api/transact                         api.clj: 227
;                                         datomic.dev-local.impl.DurableConnection/transact                        impl.clj: 180
;                                                      datomic.dev-local.btindex-db/with-tx                  btindex_db.clj: 481
;                                                    datomic.dev-local.btindex-db/expand-tx                  btindex_db.clj: 455
;                                                   datomic.core.db.ProcessExpander/getData                          db.clj:3453
;                                                              datomic.core.db/has-tx-inst?                          db.clj:3106
;                                                                       clojure.core/reduce                        core.clj:6964
;                                                                                       ...
;                                                           datomic.core.db/has-tx-inst?/fn                          db.clj:3114
;                                                                    datomic.core.error/arg                       error.clj:  62
;                                                                    datomic.core.error/arg                       error.clj:  64
;                                                                  datomic.core.error/raise                       error.clj:  55
; clojure.lang.ExceptionInfo: :db.error/reset-tx-instant You can set :db/txInstant only on the current transaction.
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "You can set :db/txInstant only on the current transaction."
;                         db/error: :db.error/reset-tx-instant
; 
; 
; 2026-01-23T12:32:44.309Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
(require '[lms.operations :as ops] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:33:42.070Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:33:49.508Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :tx-id 13194139533341, :reason "that was a mistake"}
; 2026-01-23T12:33:49.545Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:33:54.419Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:34:09.209Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :tx-id 13194139533332, :reason "another mistake"}
; 2026-01-23T12:34:09.266Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
(require '[lms.operations :as ops] :reload)
(require '[lms.views :as views] :reload)
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-23T12:35:58.402Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:36:01.258Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:36:02.025Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:36:14.669Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:36:55.048Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :tx-id 13194139533339, :reason "made a mistake"}
; 2026-01-23T12:36:55.103Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T12:38:21.869Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T12:38:22.877Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "e6cc4987-7474-4577-be79-025eb8d9d526", :external-id "SAMPLE-002"}
; 2026-01-23T12:38:29.295Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T12:38:31.316Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :external-id "SAMPLE-003"}
; 2026-01-23T12:38:37.449Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T12:38:38.829Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "e6cc4987-7474-4577-be79-025eb8d9d526", :external-id "SAMPLE-002"}
; 2026-01-23T12:38:43.279Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T12:38:44.765Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
;; In your REPL

(require '[datomic.client.api :as d])
(require '[lms.handlers :as handlers])

;; Get the current db
(def db (d/db @handlers/conn))

;; Get the HISTORY database (shows all assertions AND retractions)
(def history-db (d/history db))

;; Pick a contract-id from your test data
(def test-contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7")

;; Query current db - only shows active transactions
(d/q '[:find ?tx ?type ?amount ?time 
       :in $ ?contract
       :where
       [?tx :tx/contract ?contract]
       [?tx :tx/type ?type]
       [?tx :tx/amount ?amount]
       [?tx :db/txInstant ?time]]
     db [:contract/id test-contract-id])

;; Query HISTORY db - shows ALL transactions including retracted ones
(d/q '[:find ?tx ?type ?amount ?time ?op
       :in $ ?contract
       :where
       [?tx :tx/contract ?contract ?t ?op]  ;; ?op is true for assertions, false for retractions
       [?tx :tx/type ?type]
       [?tx :tx/amount ?amount]
       [?tx :db/txInstant ?time]]
     history-db [:contract/id test-contract-id])

;; More detailed: See what was retracted
(d/q '[:find ?tx ?attr ?val ?t ?added
       :in $ ?contract
       :where
       [?tx :tx/contract ?contract]
       [?tx ?attr ?val ?t ?added]]  ;; ?added is true for add, false for retract
     history-db [:contract/id test-contract-id])
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
#'lms.core/db
clj꞉lms.core꞉> 
#'lms.core/history-db
clj꞉lms.core꞉> 
#'lms.core/test-contract-id
clj꞉lms.core꞉> 
[[13194139533344 :payment 50000M #inst "2026-01-23T12:26:44.032-00:00"]
 [13194139533330 :payment 100000M #inst "2026-01-23T11:44:50.214-00:00"]
 [13194139533331 :payment 100000M #inst "2026-01-23T11:54:16.510-00:00"]
 [13194139533335 :payment 10000M #inst "2026-01-23T11:57:35.487-00:00"]
 [13194139533337 :payment 10000M #inst "2026-01-23T11:57:37.163-00:00"]
 [13194139533334 :payment 10000M #inst "2026-01-23T11:57:17.770-00:00"]
 [13194139533333 :payment 10000M #inst "2026-01-23T11:56:51.362-00:00"]
 [13194139533336 :payment 10000M #inst "2026-01-23T11:57:36.988-00:00"]]
clj꞉lms.core꞉> 
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/not-an-entity Unable to resolve entity: :db/note
clj꞉lms.core꞉> 
[[13194139533344 :payment 50000M #inst "2026-01-23T12:26:44.032-00:00"]
 [13194139533330 :payment 100000M #inst "2026-01-23T11:44:50.214-00:00"]
 [13194139533331 :payment 100000M #inst "2026-01-23T11:54:16.510-00:00"]
 [13194139533335 :payment 10000M #inst "2026-01-23T11:57:35.487-00:00"]
 [13194139533337 :payment 10000M #inst "2026-01-23T11:57:37.163-00:00"]
 [13194139533334 :payment 10000M #inst "2026-01-23T11:57:17.770-00:00"]
 [13194139533333 :payment 10000M #inst "2026-01-23T11:56:51.362-00:00"]
 [13194139533336 :payment 10000M #inst "2026-01-23T11:57:36.988-00:00"]]
clj꞉lms.core꞉> 
[]
clj꞉lms.core꞉> 
; 2026-01-23T12:43:38.164Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T12:43:42.697Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "e6cc4987-7474-4577-be79-025eb8d9d526", :external-id "SAMPLE-002"}
; 2026-01-23T12:43:44.205Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
[[13194139533334 :payment 10000M #inst "2026-01-23T11:57:17.770-00:00" true]
 [13194139533339 :payment 10000M #inst "2026-01-23T12:01:27.074-00:00" true]
 [13194139533332 :payment 100000M #inst "2026-01-23T11:55:43.364-00:00" false]
 [13194139533341 :payment 1000M #inst "2026-01-23T12:06:16.621-00:00" true]
 [13194139533336 :payment 10000M #inst "2026-01-23T11:57:36.988-00:00" true]
 [13194139533341 :payment 1000M #inst "2026-01-23T12:06:16.621-00:00" false]
 [13194139533330 :payment 100000M #inst "2026-01-23T11:44:50.214-00:00" true]
 [13194139533337 :payment 10000M #inst "2026-01-23T11:57:37.163-00:00" true]
 [13194139533344 :payment 50000M #inst "2026-01-23T12:26:44.032-00:00" true]
 [13194139533333 :payment 10000M #inst "2026-01-23T11:56:51.362-00:00" true]
 [13194139533339 :payment 10000M #inst "2026-01-23T12:01:27.074-00:00" false]
 [13194139533332 :payment 100000M #inst "2026-01-23T11:55:43.364-00:00" true]
 [13194139533331 :payment 100000M #inst "2026-01-23T11:54:16.510-00:00" true]
 [13194139533335 :payment 10000M #inst "2026-01-23T11:57:35.487-00:00" true]]
clj꞉lms.core꞉> 
[[13194139533337 96 10000M 13194139533337 true]
 [13194139533341 50 #inst "2026-01-23T12:06:16.621-00:00" 13194139533341 true]
 [13194139533330 97 "pay-1" 13194139533330 true]
 [13194139533348 94 :retraction 13194139533348 true]
 [13194139533348 98 "web-user" 13194139533348 true]
 [13194139533331 94 :payment 13194139533331 true]
 [13194139533348 99 "made a mistake" 13194139533348 true]
 [13194139533337 97 "pay-5" 13194139533337 true]
 [13194139533333 95 79164837199974 13194139533333 true]
 [13194139533332 97 "pay-3" 13194139533347 false]
 [13194139533339 97 "pay-6" 13194139533348 false]
 [13194139533333 98 "web-user" 13194139533333 true]
 [13194139533341 95 79164837199974 13194139533341 true]
 [13194139533341 97 "pay-7" 13194139533346 false]
 [13194139533348 95 79164837199974 13194139533348 true]
 [13194139533333 50 #inst "2026-01-23T11:56:51.362-00:00" 13194139533333 true]
 [13194139533334 95 79164837199974 13194139533334 true]
 [13194139533339 95 79164837199974 13194139533348 false]
 [13194139533337 94 :payment 13194139533337 true]
 [13194139533344 94 :payment 13194139533344 true]
 [13194139533330 94 :payment 13194139533330 true]
 [13194139533341 96 1000M 13194139533341 true]
 [13194139533334 98 "web-user" 13194139533334 true]
 [13194139533339 98 "web-user" 13194139533348 false]
 [13194139533341 98 "web-user" 13194139533341 true]
 [13194139533321 98 "system" 13194139533321 true]
 [13194139533344 97 "123ffds" 13194139533344 true]
 [13194139533339 98 "web-user" 13194139533339 true]
 [13194139533335 97 "pay-5" 13194139533335 true]
 [13194139533330 96 100000M 13194139533330 true]
 [13194139533333 94 :payment 13194139533333 true]
 [13194139533336 94 :payment 13194139533336 true]
 [13194139533330 50 #inst "2026-01-23T11:44:50.214-00:00" 13194139533330 true]
 [13194139533339 97 "pay-6" 13194139533339 true]
 [13194139533332 94 :payment 13194139533347 false]
 [13194139533348 50 #inst "2026-01-23T12:36:55.038-00:00" 13194139533348 true]
 [13194139533332 97 "pay-3" 13194139533332 true]
 [13194139533332 95 79164837199974 13194139533332 true]
 [13194139533341 94 :payment 13194139533346 false]
 [13194139533321 50 #inst "2026-01-22T08:45:06.143-00:00" 13194139533321 true]
 [13194139533344 96 50000M 13194139533344 true]
 [13194139533336 98 "web-user" 13194139533336 true]
 [13194139533335 95 79164837199974 13194139533335 true]
 [13194139533341 96 1000M 13194139533346 false]
 [13194139533339 94 :payment 13194139533339 true]
 [13194139533341 98 "web-user" 13194139533346 false]
 [13194139533333 97 "pay-4" 13194139533333 true]
 [13194139533321 95 79164837199974 13194139533321 true]
 [13194139533339 96 10000M 13194139533348 false]
 [13194139533330 98 "web-user" 13194139533330 true]
 ...]
clj꞉lms.core꞉> 
(d/q '[:find ?tx ?type ?amount ?time
       :in $ ?contract
       :where
       [?tx :tx/contract ?contract]
       [?tx :tx/type ?type]
       [?tx :tx/amount ?amount]
       [?tx :db/txInstant ?time]]
     db [:contract/id test-contract-id]); Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
(require '[datomic.client.api :as d])
(require '[lms.handlers :as handlers])

;; Get the current db
(def db (d/db @handlers/conn))

;; Get the HISTORY database (shows all assertions AND retractions)
(def history-db (d/history db))

;; Pick a contract-id from your test data
(def test-contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7"); Evaluating file: user.clj
nil
clj꞉user꞉> 
test-contract-id; Syntax error compiling at (.calva/repl.calva-repl:0:0).
; Unable to resolve symbol: test-contract-id in this context
clj꞉user꞉> 
#'user/test-contract-id
clj꞉user꞉> 
test-contract-id#uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7"
clj꞉user꞉> 
(d/q '[:find ?tx ?type ?amount ?time
       :in $ ?contract
       :where
       [?tx :tx/contract ?contract]
       [?tx :tx/type ?type]
       [?tx :tx/amount ?amount]
       [?tx :db/txInstant ?time]]
     db [:contract/id test-contract-id])
[[13194139533344 :payment 50000M #inst "2026-01-23T12:26:44.032-00:00"]
 [13194139533330 :payment 100000M #inst "2026-01-23T11:44:50.214-00:00"]
 [13194139533331 :payment 100000M #inst "2026-01-23T11:54:16.510-00:00"]
 [13194139533335 :payment 10000M #inst "2026-01-23T11:57:35.487-00:00"]
 [13194139533337 :payment 10000M #inst "2026-01-23T11:57:37.163-00:00"]
 [13194139533334 :payment 10000M #inst "2026-01-23T11:57:17.770-00:00"]
 [13194139533333 :payment 10000M #inst "2026-01-23T11:56:51.362-00:00"]
 [13194139533336 :payment 10000M #inst "2026-01-23T11:57:36.988-00:00"]]
clj꞉user꞉> 
(require '[lms.operations :as ops] :reload)
(require '[lms.contract :as contract] :reload)
(require '[lms.views :as views] :reload)
nil
clj꞉user꞉> 
; 2026-01-23T18:59:17.112Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T18:59:20.538Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T18:59:22.157Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T19:00:02.888Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :tx-id 13194139533344, :reason "reasons"}
; 2026-01-23T19:00:02.965Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 215
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
(require '[lms.contract :as contract] :reload)
(require '[lms.views :as views] :reload)
nil
clj꞉user꞉> 
; 2026-01-23T19:01:44.305Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T19:01:45.550Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 238
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:01:46.871Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 238
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:01:50.634Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T19:01:51.643Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "e6cc4987-7474-4577-be79-025eb8d9d526", :external-id "SAMPLE-002"}
; 2026-01-23T19:02:00.672Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "e6cc4987-7474-4577-be79-025eb8d9d526", :tx-id 13194139533326, :reason "test"}
; 2026-01-23T19:02:00.752Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 238
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-23T19:02:11.905Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T19:02:14.014Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 238
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       ...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:02:15.408Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T19:02:16.759Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 238
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       ...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
(require '[lms.contract :as contract] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T19:03:15.790Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 212
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:03:17.213Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 212
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:03:17.830Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 212
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:03:18.760Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T19:03:19.922Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 212
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       0;2m...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-23T19:03:28.412Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T19:03:31.443Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 212
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       ...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
; 2026-01-23T19:06:10.012Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        0morg.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/3;1mhandle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj: 107
;                                                               lms.contract/contract-state                    contract.clj: 212
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                                            clojure.core/+                        core.clj: 994
;                                                                                       ...
; java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "x" is null
; 
; 
(require '[lms.contract :as contract] :reload)
nil
clj꞉lms.core꞉> 
; 2026-01-23T19:06:20.811Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T19:06:22.572Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T19:06:23.526Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T19:06:36.383Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :tx-id 13194139533337, :reason "test"}
; 2026-01-23T19:06:36.434Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Reconnecting: disconnecting existing client for sessions: clj
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
; 2026-01-23T20:33:16.140Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
; 2026-01-23T20:33:21.150Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
; 2026-01-23T20:40:59.501Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T20:41:04.683Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T20:41:11.190Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "e6cc4987-7474-4577-be79-025eb8d9d526", :external-id "SAMPLE-002"}
; 2026-01-23T20:41:15.191Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :external-id "SAMPLE-003"}
; 2026-01-23T20:41:23.446Z 32f3b319732d INFO [lms.handlers:245] - Transaction retracted {:contract-id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :tx-id 13194139533328, :reason "test "}
; 2026-01-23T20:41:23.475Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :external-id "SAMPLE-003"}
nil
clj꞉lms.core꞉> 
; 2026-01-23T20:44:56.959Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T20:45:01.298Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :external-id "SAMPLE-003"}
; 2026-01-23T20:45:04.668Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :external-id "SAMPLE-003"}
; 2026-01-23T20:45:06.587Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c9b5e0db-9704-4370-9e2a-09450a98583c", :external-id "SAMPLE-003"}
nil
clj꞉lms.core꞉> 
; 2026-01-23T20:49:37.039Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T20:49:40.240Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 3, :filter nil}
; 2026-01-23T20:49:41.624Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T20:49:44.347Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
; 2026-01-23T20:49:46.295Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "70bf2a83-d0c4-4e5b-88eb-e225fc5eadb7", :external-id "SAMPLE-001"}
true
clj꞉lms.db꞉> 
; 2026-01-23T20:50:20.586Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj:  98
;                                                                 lms.contract/get-contract                    contract.clj: 120
;                                                                   datomic.client.api/pull                         api.clj: 387
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  56
;                                                                  datomic.core.pull/pull-1                        pull.clj: 509
;                                                                   datomic.core.pull/pull*                        pull.clj: 403
;                                                                datomic.core.db/resolve-id                          db.clj: 595
;                                                       datomic.core.db/extended-resolve-id                          db.clj: 584
;                                                        datomic.core.db/resolve-lookup-ref                          db.clj: 561
;                                                          datomic.core.db/attr-index-range                          db.clj:1052
;                                                               datomic.core.db.Db/seekAVET                          db.clj:2269
;                                                                   datomic.core.btset/seek                       btset.clj: 405
;                                                    datomic.dev-local.btindex.BTIndex/seek                     btindex.clj: 310
;                                              datomic.dev-local.btindex.BTIndexBranch/seek                     btindex.clj: 185
;                                                datomic.dev-local.btindex.BTIndexLeaf/seek                     btindex.clj: 249
;                                             datomic.dev-local.btindex.BTIndexLeaf/bsearch                     btindex.clj: 206
;                                      datomic.dev-local.btindex/lookup-cmp/reify/compareTo                     btindex.clj: 275
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 401
;                                                    datomic.dev-local.tx/keyoff-datom-bbuf                          tx.clj: 374
;                                                           datomic.dev-local.io/read-n-buf                          io.clj:  72
;                                                          datomic.dev-local.io/read-n-bbuf                          io.clj:  66
;                                                           sun.nio.ch.FileChannelImpl.read            FileChannelImpl.java:1152
;                                                       sun.nio.ch.FileChannelImpl.implRead            FileChannelImpl.java:1160
;                                                     sun.nio.ch.FileChannelImpl.ensureOpen            FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
; 
; 
nil
clj꞉lms.migration꞉> 
nil
clj꞉lms.migration꞉> 
nil
clj꞉lms.migration꞉> 
#'lms.migration/conn
clj꞉lms.migration꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 5, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 6, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data
 [#datom[13194139533318 50 #inst "2026-01-23T20:50:34.885-00:00" 13194139533318 true] #datom[73 10 :contract/id 13194139533318 true] #datom[73 40 54 13194139533318 true] #datom[73 42 38 13194139533318 true] #datom[73 41 35 13194139533318 true] #datom[73 63 "Unique identifier for contract" 13194139533318 true] #datom[74 10 :contract/external-id 13194139533318 true] #datom[74 40 23 13194139533318 true] #datom[74 42 37 13194139533318 true] #datom[74 41 35 13194139533318 true] #datom[74 63 "Jira key or LOS reference (e.g., LOAN-2023-001)" 13194139533318 true] #datom[75 10 :contract/customer-name 13194139533318 true] #datom[75 40 23 13194139533318 true] #datom[75 41 35 13194139533318 true] #datom[75 63 "Customer legal name" 13194139533318 true] #datom[76 10 :contract/customer-id 13194139533318 true] #datom[76 40 23 13194139533318 true] #datom[76 41 35 13194139533318 true] #datom[76 63 "Customer identifier (CR number, national ID, etc.)" 13194139533318 true] #datom[77 10 :contract/status 13194139533318 true] #datom[77 40 21 13194139533318 true] #datom[77 41 35 13194139533318 true] #datom[77 63 "Contract status: :active :closed :written-off :refinanced" 13194139533318 true] #datom[78 10 :contract/start-date 13194139533318 true] #datom[78 40 25 13194139533318 true] #datom[78 41 35 13194139533318 true] #datom[78 63 "Contract start date (disbursement date)" 13194139533318 true] #datom[79 10 :contract/maturity-date 13194139533318 true] #datom[79 40 25 13194139533318 true] #datom[79 41 35 13194139533318 true] #datom[79 63 "Contract maturity date (final payment date)" 13194139533318 true] #datom[80 10 :contract/principal 13194139533318 true] #datom[80 40 62 13194139533318 true] #datom[80 41 35 13194139533318 true] #datom[80 63 "Principal amount financed (SAR)" 13194139533318 true] #datom[81 10 :contract/security-deposit 13194139533318 true] #datom[81 40 62 13194139533318 true] #datom[81 41 35 13194139533318 true] #datom[81 63 "Required security deposit amount (SAR). Actual held amount is derived." 13194139533318 true] #datom[82 10 :contract/step-up-terms 13194139533318 true] #datom[82 40 23 13194139533318 true] #datom[82 41 35 13194139533318 true] #datom[82 63 "EDN string with step-up rules. Nil if flat rate. See PRD section 4 for format." 13194139533318 true] #datom[83 10 :installment/id 13194139533318 true] #datom[83 40 54 13194139533318 true] #datom[83 42 38 13194139533318 true] #datom[83 41 35 13194139533318 true] #datom[83 63 "Unique identifier for installment" 13194139533318 true] #datom[84 10 :installment/contract 13194139533318 true] #datom[84 40 20 13194139533318 true] ...],
 :tempids {}}
clj꞉lms.migration꞉> 
; Syntax error compiling at (src/lms/migration.clj:471:18).
; No such var: mig/load-jira-data
clj꞉lms.migration꞉> 
; Syntax error compiling at (src/lms/migration.clj:472:17).
; No such var: mig/load-payment-data
clj꞉lms.migration꞉> 
0
clj꞉lms.migration꞉> 
; Evaluating file: migration.clj
nil
clj꞉lms.migration꞉> 
#'lms.migration/conn
clj꞉lms.migration꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 6, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 7, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data [#datom[13194139533319 50 #inst "2026-01-23T20:51:01.097-00:00" 13194139533319 true]],
 :tempids {}}
clj꞉lms.migration꞉> 
; Execution error (FileNotFoundException) at java.io.FileInputStream/open0 (FileInputStream.java:-2).
; migration/LOAN-2024-001.edn (No such file or directory)
clj꞉lms.migration꞉> 
#'lms.db/conn
clj꞉lms.db꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 7, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 8, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data [#datom[13194139533320 50 #inst "2026-01-23T20:52:30.717-00:00" 13194139533320 true]],
 :tempids {}}
clj꞉lms.db꞉> 
#'lms.db/db
clj꞉lms.db꞉> 
[[:contract/customer-name "Customer legal name"]
 [:contract/status "Contract status: :active :closed :written-off :refinanced"]
 [:contract/security-deposit "Required security deposit amount (SAR). Actual held amount is derived."]
 [:contract/customer-id "Customer identifier (CR number, national ID, etc.)"]
 [:contract/external-id "Jira key or LOS reference (e.g., LOAN-2023-001)"]
 [:contract/start-date "Contract start date (disbursement date)"]
 [:contract/id "Unique identifier for contract"]
 [:contract/maturity-date "Contract maturity date (final payment date)"]
 [:contract/step-up-terms "EDN string with step-up rules. Nil if flat rate. See PRD section 4 for format."]
 [:contract/principal "Principal amount financed (SAR)"]]
clj꞉lms.db꞉> 
#'lms.db/test-contract-id
clj꞉lms.db꞉> 
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/not-an-entity Unable to resolve entity: [:contract/id #uuid "e872c69d-a3b2-4326-9008-5cdc034a9b19"] in datom ["datomic.tx" :tx/contract [:contract/id #uuid "e872c69d-a3b2-4326-9008-5cdc034a9b19"]]
clj꞉lms.db꞉> 
; 2026-01-23T20:53:17.023Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T20:53:18.154Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T20:53:19.108Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T20:53:20.154Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-23T20:53:24.943Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T20:53:25.367Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T20:53:55.522Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
#'user/verify-week-1
clj꞉user꞉> 
true
clj꞉lms.db꞉> 
#'user/create-sample-contracts
clj꞉user꞉> 
; 2026-01-23T20:54:41.433Z 32f3b319732d INFO [user:48] - Starting Week 1 verification...
; 2026-01-23T20:54:41.440Z 32f3b319732d INFO [user:51] - 1. Creating database and installing schema...
; 2026-01-23T20:54:41.482Z 32f3b319732d INFO [user:54] -    ✓ Schema installed
; 2026-01-23T20:54:41.483Z 32f3b319732d INFO [user:57] - 2. Creating test contract...
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/not-an-entity Unable to resolve entity: [:contract/id #uuid "9c436b4e-4da1-4af7-a6ce-d5e4c42d3262"] in datom [-9223301668109597812 :fee/contract [:contract/id #uuid "9c436b4e-4da1-4af7-a6ce-d5e4c42d3262"]]
clj꞉user꞉> 
; 2026-01-23T20:54:55.720Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T20:59:56.004Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
#'user/verify-week-1
clj꞉user꞉> 
; 2026-01-23T21:01:32.452Z 32f3b319732d INFO [user:48] - Starting Week 1 verification...
; 2026-01-23T21:01:32.458Z 32f3b319732d INFO [user:51] - 1. Creating database and installing schema...
; 2026-01-23T21:01:32.475Z 32f3b319732d INFO [user:54] -    ✓ Schema installed
; 2026-01-23T21:01:32.475Z 32f3b319732d INFO [user:57] - 2. Creating test contract...
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/not-an-entity Unable to resolve entity: 57706b3b-61cb-4fee-9542-1301104042d1 in datom [-9223301668109597781 :fee/contract #uuid "57706b3b-61cb-4fee-9542-1301104042d1"]
clj꞉user꞉> 
#'user/verify-week-1
clj꞉user꞉> 
; 2026-01-23T21:06:23.767Z 32f3b319732d INFO [user:48] - Starting Week 1 verification...
; 2026-01-23T21:06:23.777Z 32f3b319732d INFO [user:51] - 1. Creating database and installing schema...
; 2026-01-23T21:06:23.797Z 32f3b319732d INFO [user:54] -    ✓ Schema installed
; 2026-01-23T21:06:23.798Z 32f3b319732d INFO [user:57] - 2. Creating test contract...
; 2026-01-23T21:06:23.806Z 32f3b319732d INFO [user:103] -    ✓ Contract created: VERIFY-001
; 2026-01-23T21:06:23.806Z 32f3b319732d INFO [user:106] - 3. Recording payment...
; 2026-01-23T21:06:23.809Z 32f3b319732d INFO [user:115] -    ✓ Payment recorded: 50,000 SAR
; 2026-01-23T21:06:23.809Z 32f3b319732d INFO [user:118] - 4. Computing contract state...
; 2026-01-23T21:06:23.834Z 32f3b319732d INFO [user:122] -    ✓ Contract state computed
; 2026-01-23T21:06:23.835Z 32f3b319732d INFO [user:125] - 5. Verifying results...
; 2026-01-23T21:06:23.835Z 32f3b319732d INFO [user:159] -    ✓ fees-count
; 2026-01-23T21:06:23.835Z 32f3b319732d INFO [user:159] -    ✓ contract-exists?
; 2026-01-23T21:06:23.835Z 32f3b319732d INFO [user:159] -    ✓ inst-1-profit-paid
; 2026-01-23T21:06:23.835Z 32f3b319732d INFO [user:159] -    ✓ installments-count
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ credit-balance-zero
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ inst-2-paid
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ fee-paid
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ transactions-count
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ inst-1-principal-paid
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ inst-1-status
; 2026-01-23T21:06:23.836Z 32f3b319732d INFO [user:159] -    ✓ fee-status
{:success? false,
 :contract-id #uuid "fd450d76-ec93-4f3b-92c8-6787f2e4cfcb",
 :state
 {:total-fees-due 5000M,
  :credit-balance 0M,
  :installments
  ({:principal-due 100000M,
    :profit-paid 10000M,
    :total-paid 45000M,
    :total-due 110000M,
    :principal-paid 35000M,
    :status :partial,
    :id #uuid "acaa4737-008a-4393-a0b4-c21e0b1cabe1",
    :due-date #inst "2024-01-31T00:00:00.000-00:00",
    :profit-due 10000M,
    :seq 1,
    :outstanding 65000M}
   {:principal-due 100000M,
    :profit-paid 0M,
    :total-paid 0M,
    :total-due 110000M,
    :principal-paid 0M,
    :status :overdue,
    :id #uuid "e05ebcb7-c362-4851-a1da-d8ede6f182f7",
    :due-date #inst "2024-02-28T00:00:00.000-00:00",
    :profit-due 10000M,
    :seq 2,
    :outstanding 110000M}),
  :total-fees-paid 5000M,
  :total-profit-paid 10000M,
  :deposit-held 0M,
  :contract
  {:customer-id "CR-999999",
   :external-id "VERIFY-001",
   :maturity-date #inst "2024-12-31T00:00:00.000-00:00",
   :status :active,
   :id #uuid "fd450d76-ec93-4f3b-92c8-6787f2e4cfcb",
   :security-deposit-required 60000M,
   :step-up-terms nil,
   :principal 1200000M,
   :start-date #inst "2024-01-01T00:00:00.000-00:00",
   :customer-name "Test Customer Co."},
  :total-profit-due 20000M,
  :total-principal-paid 35000M,
  :total-outstanding 175000M,
  :fees
  ({:id #uuid "16e70d32-7a66-4a72-9943-3617e0aeffd3",
    :type :management,
    :amount 5000M,
    :due-date #inst "2024-01-01T00:00:00.000-00:00",
    :paid 5000M,
    :outstanding 0M,
    :status :paid}),
  :total-principal-due 200000M,
  :transactions
  ({:amount nil,
    :original-amount nil,
    :retracted? false,
    :original-date nil,
    :type :boarding,
    :note nil,
    :author "verify-script",
    :reference nil,
    :tx-id 13194139533321,
    :timestamp #inst "2026-01-23T21:06:23.800-00:00",
    :migrated-from nil}
   {:amount 50000M,
    :original-amount nil,
    :retracted? false,
    :original-date nil,
    :type :payment,
    :note nil,
    :author "verify-script",
    :reference "VERIFY-PAY-001",
    :tx-id 13194139533322,
    :timestamp #inst "2026-01-23T21:06:23.806-00:00",
    :migrated-from nil})},
 :checks
 {:fees-count true,
  :contract-exists? true,
  :inst-1-profit-paid true,
  :installments-count true,
  :credit-balance-zero true,
  :total-outstanding-correct false,
  :inst-2-paid true,
  :inst-2-status false,
  :fee-paid true,
  :transactions-count true,
  :inst-1-principal-paid true,
  :inst-1-status true,
  :fee-status true}}
; 
; 2026-01-23T21:06:23.836Z 32f3b319732d ERROR [user:160] -    ✗ total-outstanding-correct FAILED
; 
; 2026-01-23T21:06:23.836Z 32f3b319732d ERROR [user:160] -    ✗ inst-2-status FAILED
; 
; 2026-01-23T21:06:23.837Z 32f3b319732d ERROR [user:164] - 
; ❌ Week 1 verification FAILED
clj꞉user꞉> 
; 2026-01-23T21:08:37.631Z 32f3b319732d INFO [user:184] - Creating sample contracts...
; 2026-01-23T21:08:37.792Z 32f3b319732d INFO [user:213] - Created SAMPLE-001 {:id #uuid "823c8edc-512f-49bb-a75a-43047126a65f"}
; 2026-01-23T21:08:37.863Z 32f3b319732d INFO [user:249] - Created SAMPLE-002 with payments {:id #uuid "ca0deca6-d369-4ef3-b93c-ecad03dab381"}
; 2026-01-23T21:08:37.883Z 32f3b319732d INFO [user:280] - Created SAMPLE-003 (fully paid) {:id #uuid "7fca1981-d411-4df5-a1cc-496260845cd7"}
; 2026-01-23T21:08:37.884Z 32f3b319732d INFO [user:282] - ✅ Sample contracts created successfully
; 2026-01-23T21:08:37.885Z 32f3b319732d INFO [user:283] - View at: http://localhost:3000/contracts
nil
clj꞉user꞉> 
; 2026-01-23T21:08:43.725Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:08:44.801Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:08:49.877Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-23T21:09:02.867Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; 2026-01-23T21:09:02.885Z 32f3b319732d INFO [user:15] - Server started at http://localhost:3001
nil
clj꞉user꞉> 
; 2026-01-23T21:09:07.385Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:09:08.485Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:09:11.654Z 32f3b319732d INFO [user:21] - Server stopped
nil
clj꞉user꞉> 
; 2026-01-23T21:09:13.599Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; 2026-01-23T21:09:13.636Z 32f3b319732d INFO [user:15] - Server started at http://localhost:3001
nil
clj꞉user꞉> 
; 2026-01-23T21:09:13.767Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:09:17.427Z 32f3b319732d INFO [user:21] - Server stopped
nil
clj꞉user꞉> 
; 2026-01-23T21:09:19.040Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; 2026-01-23T21:09:19.054Z 32f3b319732d INFO [user:15] - Server started at http://localhost:3001
nil
clj꞉user꞉> 
; 2026-01-23T21:09:22.172Z 32f3b319732d INFO [user:48] - Starting Week 1 verification...
; 2026-01-23T21:09:22.173Z 32f3b319732d INFO [user:51] - 1. Creating database and installing schema...
; 2026-01-23T21:09:22.188Z 32f3b319732d INFO [user:54] -    ✓ Schema installed
; 2026-01-23T21:09:22.189Z 32f3b319732d INFO [user:57] - 2. Creating test contract...
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/unique-conflict Unique conflict: :contract/external-id, value: VERIFY-001 already held by: 83562883711078 asserted for: 74766790688910
clj꞉user꞉> 
; 2026-01-23T21:09:30.501Z 32f3b319732d INFO [user:184] - Creating sample contracts...
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/unique-conflict Unique conflict: :contract/external-id, value: SAMPLE-001 already held by: 74766790688874 asserted for: 79164837200014
clj꞉user꞉> 
nil
clj꞉user꞉> 
; 2026-01-23T21:09:37.182Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
#'user/conn
clj꞉user꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 21, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 22, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data [#datom[13194139533334 50 #inst "2026-01-23T21:09:43.526-00:00" 13194139533334 true]],
 :tempids {}}
clj꞉user꞉> 
; Syntax error compiling at (dev/user.clj:0:0).
; Unable to resolve symbol: def in this context
clj꞉user꞉> 
#'user/fees
clj꞉user꞉> 
#'user/installments
clj꞉user꞉> 
{:allocations
 [{:type :fee, :id #uuid "a3d14202-f844-48b6-b4f1-dbcf9d587753", :amount 1000M}
  {:type :installment,
   :id #uuid "8ecb7cc3-c173-46ec-8f1c-7a038a342a7a",
   :seq 1,
   :profit-paid 10000M,
   :principal-paid 39000M}],
 :credit-balance 0M}
clj꞉user꞉> 
#'user/test-id
clj꞉user꞉> 
; Execution error (IllegalArgumentException) at datomic.core.datalog/resolve-id (datalog.clj:340).
; Cannot resolve key: [:contract/id #uuid "40c4c1f2-91da-4619-9830-b6958857b0bf"]
clj꞉user꞉> 
; 2026-01-23T21:10:05.033Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:10:35.194Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:11:35.333Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:11:49.834Z 32f3b319732d INFO [user:184] - Creating sample contracts...
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/unique-conflict Unique conflict: :contract/external-id, value: SAMPLE-001 already held by: 74766790688874 asserted for: 87960930222222
clj꞉user꞉> 
true
clj꞉lms.db꞉> 
; 2026-01-23T21:12:26.431Z 32f3b319732d INFO [user:21] - Server stopped
nil
clj꞉user꞉> 
#'lms.db/conn
clj꞉lms.db꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 5, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 6, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data
 [#datom[13194139533318 50 #inst "2026-01-23T21:12:30.959-00:00" 13194139533318 true] #datom[73 10 :contract/id 13194139533318 true] #datom[73 40 54 13194139533318 true] #datom[73 42 38 13194139533318 true] #datom[73 41 35 13194139533318 true] #datom[73 63 "Unique identifier for contract" 13194139533318 true] #datom[74 10 :contract/external-id 13194139533318 true] #datom[74 40 23 13194139533318 true] #datom[74 42 37 13194139533318 true] #datom[74 41 35 13194139533318 true] #datom[74 63 "Jira key or LOS reference (e.g., LOAN-2023-001)" 13194139533318 true] #datom[75 10 :contract/customer-name 13194139533318 true] #datom[75 40 23 13194139533318 true] #datom[75 41 35 13194139533318 true] #datom[75 63 "Customer legal name" 13194139533318 true] #datom[76 10 :contract/customer-id 13194139533318 true] #datom[76 40 23 13194139533318 true] #datom[76 41 35 13194139533318 true] #datom[76 63 "Customer identifier (CR number, national ID, etc.)" 13194139533318 true] #datom[77 10 :contract/status 13194139533318 true] #datom[77 40 21 13194139533318 true] #datom[77 41 35 13194139533318 true] #datom[77 63 "Contract status: :active :closed :written-off :refinanced" 13194139533318 true] #datom[78 10 :contract/start-date 13194139533318 true] #datom[78 40 25 13194139533318 true] #datom[78 41 35 13194139533318 true] #datom[78 63 "Contract start date (disbursement date)" 13194139533318 true] #datom[79 10 :contract/maturity-date 13194139533318 true] #datom[79 40 25 13194139533318 true] #datom[79 41 35 13194139533318 true] #datom[79 63 "Contract maturity date (final payment date)" 13194139533318 true] #datom[80 10 :contract/principal 13194139533318 true] #datom[80 40 62 13194139533318 true] #datom[80 41 35 13194139533318 true] #datom[80 63 "Principal amount financed (SAR)" 13194139533318 true] #datom[81 10 :contract/security-deposit 13194139533318 true] #datom[81 40 62 13194139533318 true] #datom[81 41 35 13194139533318 true] #datom[81 63 "Required security deposit amount (SAR). Actual held amount is derived." 13194139533318 true] #datom[82 10 :contract/step-up-terms 13194139533318 true] #datom[82 40 23 13194139533318 true] #datom[82 41 35 13194139533318 true] #datom[82 63 "EDN string with step-up rules. Nil if flat rate. See PRD section 4 for format." 13194139533318 true] #datom[83 10 :installment/id 13194139533318 true] #datom[83 40 54 13194139533318 true] #datom[83 42 38 13194139533318 true] #datom[83 41 35 13194139533318 true] #datom[83 63 "Unique identifier for installment" 13194139533318 true] #datom[84 10 :installment/contract 13194139533318 true] #datom[84 40 20 13194139533318 true] ...],
 :tempids {}}
clj꞉lms.db꞉> 
; Execution error (ClosedChannelException) at sun.nio.ch.FileChannelImpl/ensureOpen (FileChannelImpl.java:169).
; null
clj꞉lms.db꞉> 
#'lms.db/db
clj꞉lms.db꞉> 
[[:contract/customer-name "Customer legal name"]
 [:contract/status "Contract status: :active :closed :written-off :refinanced"]
 [:contract/security-deposit "Required security deposit amount (SAR). Actual held amount is derived."]
 [:contract/customer-id "Customer identifier (CR number, national ID, etc.)"]
 [:contract/external-id "Jira key or LOS reference (e.g., LOAN-2023-001)"]
 [:contract/start-date "Contract start date (disbursement date)"]
 [:contract/id "Unique identifier for contract"]
 [:contract/maturity-date "Contract maturity date (final payment date)"]
 [:contract/step-up-terms "EDN string with step-up rules. Nil if flat rate. See PRD section 4 for format."]
 [:contract/principal "Principal amount financed (SAR)"]]
clj꞉lms.db꞉> 
#'lms.db/test-contract-id
clj꞉lms.db꞉> 
; Execution error (ExceptionInfo) at datomic.core.error/raise (error.clj:55).
; :db.error/not-an-entity Unable to resolve entity: [:contract/id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd"] in datom ["datomic.tx" :tx/contract [:contract/id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd"]]
clj꞉lms.db꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 6, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 7, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data
 [#datom[13194139533319 50 #inst "2026-01-23T21:14:10.806-00:00" 13194139533319 true] #datom[83562883711078 73 #uuid "3b9540af-15b5-412a-a2d9-a62790932efd" 13194139533319 true] #datom[83562883711078 77 :active 13194139533319 true] #datom[83562883711078 79 #inst "2025-01-01T00:00:00.000-00:00" 13194139533319 true] #datom[83562883711078 80 1000000M 13194139533319 true] #datom[83562883711078 78 #inst "2024-01-01T00:00:00.000-00:00" 13194139533319 true] #datom[83562883711078 75 "Test Customer" 13194139533319 true] #datom[83562883711078 76 "CR-123456" 13194139533319 true] #datom[83562883711078 74 "TEST-001" 13194139533319 true] #datom[83562883711078 81 50000M 13194139533319 true] #datom[13194139533319 94 :boarding 13194139533319 true] #datom[13194139533319 95 83562883711078 13194139533319 true] #datom[13194139533319 98 "repl-user" 13194139533319 true]],
 :tempids {"string" 83562883711078, "datomic.tx" 13194139533319}}
clj꞉lms.db꞉> 
[[{:contract/id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd",
   :contract/status :active,
   :contract/maturity-date #inst "2025-01-01T00:00:00.000-00:00",
   :contract/principal 1000000M,
   :contract/start-date #inst "2024-01-01T00:00:00.000-00:00",
   :contract/customer-name "Test Customer",
   :contract/customer-id "CR-123456",
   :contract/external-id "TEST-001",
   :db/id 83562883711078,
   :contract/security-deposit 50000M}]]
clj꞉lms.db꞉> 
; 2026-01-23T21:14:29.126Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; 2026-01-23T21:14:29.156Z 32f3b319732d INFO [user:15] - Server started at http://localhost:3001
nil
clj꞉user꞉> 
; 2026-01-23T21:14:35.057Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:36.685Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:38.201Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:39.289Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:43.195Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:44.234Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:48.374Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:49.444Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:52.085Z 32f3b319732d INFO [user:21] - Server stopped
; 2026-01-23T21:14:52.089Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
; 2026-01-23T21:14:52.131Z 32f3b319732d INFO [user:15] - Server started at http://localhost:3001
nil
clj꞉user꞉> 
; 2026-01-23T21:14:55.004Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:55.364Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:14:57.571Z 32f3b319732d INFO [user:21] - Server stopped
nil
clj꞉user꞉> 
; 2026-01-23T21:15:05.088Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T21:15:07.717Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:08.887Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:10.374Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:15.447Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:19.470Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:20.540Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-23T21:15:31.203Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T21:15:34.010Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:35.090Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-23T21:15:40.157Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; Evaluating file: core.clj
; 
; Syntax error compiling at (src/lms/core.clj:72:3).
; No such var: handlers/reverse-transaction-handler
; Evaluation of file core.clj failed: class clojure.lang.Compiler$CompilerException
clj꞉lms.core꞉> 
; Syntax error (ClassNotFoundException) compiling at (src/lms/core.clj:0:0).
; taoensso.timbre
; 
; Syntax error reading source at (REPL:10:39).
; Unmatched delimiter: )
clj꞉lms.core꞉> 
; 2026-01-23T21:16:10.236Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Evaluating file: core.clj
; 
; Syntax error compiling at (src/lms/core.clj:72:3).
; No such var: handlers/reverse-transaction-handler
; Evaluation of file core.clj failed: class clojure.lang.Compiler$CompilerException
clj꞉lms.core꞉> 
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Reconnecting: disconnecting existing client for sessions: clj
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
; Evaluating file: core.clj
; 
; ; clj  lms.core 
; Syntax error compiling at (src/lms/core.clj:72:3).
; No such var: handlers/reverse-transaction-handler
; Evaluation of file core.clj failed: class clojure.lang.Compiler$CompilerException
clj꞉lms.core꞉> 
; Evaluating file: handlers.clj
; 
; ; clj  lms.handlers 
; Syntax error compiling at (src/lms/handlers.clj:247:11).
; No such var: ops/reverse-transaction
; Evaluation of file handlers.clj failed: class clojure.lang.Compiler$CompilerException
clj꞉lms.handlers꞉> 
; Evaluating file: operations.clj
nil
clj꞉lms.operations꞉> 
; Evaluating file: handlers.clj
nil
clj꞉lms.handlers꞉> 
; Evaluating file: core.clj
nil
clj꞉lms.core꞉> 
; 2026-01-23T21:19:34.977Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T21:19:39.050Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-23T21:19:39.060Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-23T21:19:41.063Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:19:53.299Z 32f3b319732d INFO [lms.handlers:203] - Payment recorded {:contract-id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :amount 1000M, :reference "pay-1", :original-date #inst "2026-01-23T00:00:00.000-00:00", :note "payment"}
; 2026-01-23T21:19:53.328Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:21:26.185Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:21:54.696Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-23T21:21:57.251Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; Evaluating file: views.clj
#'lms.views/error-500-page
clj꞉lms.views꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-23T21:22:29.917Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T21:22:33.480Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:22:41.028Z 32f3b319732d ERROR [lms.handlers:262] - Error reversing transaction
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                  lms.handlers/reverse-transaction-handler                    handlers.clj: 247
;                                                        lms.operations/reverse-transaction                  operations.clj: 203
;                                                               datomic.client.api/transact                         api.clj: 227
;                                         datomic.dev-local.impl.DurableConnection/transact                        impl.clj: 180
;                                                      datomic.dev-local.btindex-db/with-tx                  btindex_db.clj: 481
;                                                    datomic.dev-local.btindex-db/expand-tx                  btindex_db.clj: 454
;                                         datomic.dev-local.btindex-db/expand-tx/inject-all                  btindex_db.clj: 450
;                                                                       clojure.core/reduce                        core.clj:6964
;                                                                                       ...
;                                      datomic.dev-local.btindex-db/expand-tx/inject-all/fn                  btindex_db.clj: 450
;                                                     datomic.core.db.ProcessInpoint/inject                          db.clj:3023
;                                                                datomic.core.db/expand-map                          db.clj:2807
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                             datomic.core.db/expand-map/fn                          db.clj:2812
;                                                              datomic.core.db/require-attr                          db.clj: 766
;                                                            datomic.core.db/require-attrid                          db.clj: 758
;                                                                datomic.core.db/require-id                          db.clj: 605
;                                                                    datomic.core.error/arg                       error.clj:  64
;                                                                  datomic.core.error/raise                       error.clj:  55
; clojure.lang.ExceptionInfo: :db.error/not-an-entity Unable to resolve entity: :tx/reverses
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "Unable to resolve entity: :tx/reverses"
;                         db/error: :db.error/not-an-entity
;                           entity: :tx/reverses
; 
; 
(lms.db/install-schema (lms.db/get-connection))
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 9, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 10, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data [#datom[13194139533322 50 #inst "2026-01-23T21:23:28.052-00:00" 13194139533322 true]],
 :tempids {}}
clj꞉lms.core꞉> 
; 2026-01-23T21:23:37.609Z 32f3b319732d ERROR [lms.handlers:262] - Error reversing transaction
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                  lms.handlers/reverse-transaction-handler                    handlers.clj: 247
;                                                        lms.operations/reverse-transaction                  operations.clj: 203
;                                                               datomic.client.api/transact                         api.clj: 227
;                                         datomic.dev-local.impl.DurableConnection/transact                        impl.clj: 180
;                                                      datomic.dev-local.btindex-db/with-tx                  btindex_db.clj: 481
;                                                    datomic.dev-local.btindex-db/expand-tx                  btindex_db.clj: 454
;                                         datomic.dev-local.btindex-db/expand-tx/inject-all                  btindex_db.clj: 450
;                                                                       clojure.core/reduce                        core.clj:6964
;                                                                                       ...
;                                      datomic.dev-local.btindex-db/expand-tx/inject-all/fn                  btindex_db.clj: 450
;                                                     datomic.core.db.ProcessInpoint/inject                          db.clj:3023
;                                                                datomic.core.db/expand-map                          db.clj:2807
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                             datomic.core.db/expand-map/fn                          db.clj:2812
;                                                              datomic.core.db/require-attr                          db.clj: 766
;                                                            datomic.core.db/require-attrid                          db.clj: 758
;                                                                datomic.core.db/require-id                          db.clj: 605
;                                                                    datomic.core.error/arg                       error.clj:  64
;                                                                  datomic.core.error/raise                       error.clj:  55
; clojure.lang.ExceptionInfo: :db.error/not-an-entity Unable to resolve entity: :tx/reverses
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "Unable to resolve entity: :tx/reverses"
;                         db/error: :db.error/not-an-entity
;                           entity: :tx/reverses
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-23T21:23:52.607Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T21:23:54.315Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:24:03.111Z 32f3b319732d ERROR [lms.handlers:262] - Error reversing transaction
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                  lms.handlers/reverse-transaction-handler                    handlers.clj: 247
;                                                        lms.operations/reverse-transaction                  operations.clj: 203
;                                                               datomic.client.api/transact                         api.clj: 227
;                                         datomic.dev-local.impl.DurableConnection/transact                        impl.clj: 180
;                                                      datomic.dev-local.btindex-db/with-tx                  btindex_db.clj: 481
;                                                    datomic.dev-local.btindex-db/expand-tx                  btindex_db.clj: 454
;                                         datomic.dev-local.btindex-db/expand-tx/inject-all                  btindex_db.clj: 450
;                                                                       clojure.core/reduce                        core.clj:6964
;                                                                                       ...
;                                      datomic.dev-local.btindex-db/expand-tx/inject-all/fn                  btindex_db.clj: 450
;                                                     datomic.core.db.ProcessInpoint/inject                          db.clj:3023
;                                                                datomic.core.db/expand-map                          db.clj:2807
;                                                                       clojure.core/reduce                        core.clj:6965
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  13
;                                                                 clojure.core.protocols/fn                   protocols.clj:  74
;                                                         clojure.core.protocols/seq-reduce                   protocols.clj:  31
;                                                               clojure.core.protocols/fn/G                   protocols.clj:  19
;                                                                 clojure.core.protocols/fn                   protocols.clj: 167
;                                                             datomic.core.db/expand-map/fn                          db.clj:2812
;                                                              datomic.core.db/require-attr                          db.clj: 766
;                                                            datomic.core.db/require-attrid                          db.clj: 758
;                                                                datomic.core.db/require-id                          db.clj: 605
;                                                                    datomic.core.error/arg                       error.clj:  64
;                                                                  datomic.core.error/raise                       error.clj:  55
; clojure.lang.ExceptionInfo: :db.error/not-an-entity Unable to resolve entity: :tx/reverses
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "Unable to resolve entity: :tx/reverses"
;                         db/error: :db.error/not-an-entity
;                           entity: :tx/reverses
; 
; 
(lms.db/install-schema (lms.db/get-connection))
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 10, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 11, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data [#datom[13194139533323 50 #inst "2026-01-23T21:24:27.568-00:00" 13194139533323 true]],
 :tempids {}}
clj꞉lms.core꞉> ;; Step 1: Reload the db namespace to pick up the new schema
(require '[lms.db :as db] :reload)

;; Step 2: Now install the schema (which now includes :tx/reverses)
(db/install-schema (db/get-connection))

; Syntax error compiling at (.calva/repl.calva-repl:4233:1).
; No such namespace: db
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 11, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 12, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data
 [#datom[13194139533324 50 #inst "2026-01-23T21:25:49.853-00:00" 13194139533324 true] #datom[94 63 "Transaction type:\n                     :boarding           - Contract created\n                     :disbursement       - Loan funded to customer\n                     :payment            - Customer payment (waterfall allocates)\n                     :reversal           - Reverses a previous payment\n                     :deposit-received   - Security deposit collected\n                     :deposit-refund     - Security deposit returned\n                     :deposit-offset     - Deposit applied to balance (flows through waterfall)\n                     :rate-adjustment    - Schedule profit amounts changed" 13194139533324 true] #datom[94 63 "Transaction type:\n                     :boarding           - Contract created\n                     :disbursement       - Loan funded to customer\n                     :payment            - Customer payment (waterfall allocates)\n                     :deposit-received   - Security deposit collected\n                     :deposit-refund     - Security deposit returned\n                     :deposit-offset     - Deposit applied to balance (flows through waterfall)\n                     :rate-adjustment    - Schedule profit amounts changed" 13194139533324 false] #datom[102 10 :tx/reverses 13194139533324 true] #datom[102 40 20 13194139533324 true] #datom[102 41 35 13194139533324 true] #datom[102 63 "Reference to the transaction this reversal cancels.\n                     Creates a link: reversal-tx -> original-tx.\n                     Used for compensating transactions (idiomatic Datomic pattern)." 13194139533324 true] #datom[0 13 102 13194139533324 true]],
 :tempids {}}
clj꞉lms.core꞉> 
; 2026-01-23T21:25:54.210Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:26:00.141Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :tx-id 13194139533321, :reason "mistake"}
; 2026-01-23T21:26:00.186Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-23T21:26:45.969Z 32f3b319732d INFO [lms.handlers:203] - Payment recorded {:contract-id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :amount 50000M, :reference "pay-2", :original-date #inst "2026-01-23T00:00:00.000-00:00", :note "new payment"}
; 2026-01-23T21:26:45.999Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
#'lms.core/reload!
clj꞉lms.core꞉> (reload!)
:reloaded
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> (reload!)
:reloaded
clj꞉lms.core꞉> 
#'lms.core/reload!
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-23T21:32:38.104Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-23T21:32:42.939Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-23T21:32:42.968Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; Execution error (ClosedChannelException) at sun.nio.ch.FileChannelImpl/ensureOpen (FileChannelImpl.java:169).
; null
clj꞉user꞉> 
; 2026-01-24T09:07:53.479Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "3b9540af-15b5-412a-a2d9-a62790932efd", :external-id "TEST-001"}
; 2026-01-24T09:07:57.623Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
nil
clj꞉wakecap-test꞉> 
#'wakecap-test/facility-id
clj꞉wakecap-test꞉> 
#'wakecap-test/contract-id
clj꞉wakecap-test꞉> 
#'wakecap-test/conn
clj꞉wakecap-test꞉> 
#'wakecap-test/get-conn
clj꞉wakecap-test꞉> 
;; Load the namespace
(require '[wakecap-test :refer :all])

;; Step through events one at a time
(event-0-setup!)
(event-1-payment!)
(event-2-payment!)
;; ... see how allocations change

;; Or run all at once
(replay-all!)
;; Load the namespace
(require '[wakecap-test :refer :all])

;; Step through events one at a time
(event-0-setup!)
(event-1-payment!)
(event-2-payment!)
;; ... see how allocations change

;; Or run all at once
(replay-all!)
;; Load the namespace
(require '[wakecap-test :refer :all])

;; Step through events one at a time
(event-0-setup!)
(event-1-payment!)
(event-2-payment!)
;; ... see how allocations change

;; Or run all at once
(replay-all!)
;; Load the namespace
(require '[wakecap-test :refer :all])

;; Step through events one at a time
(event-0-setup!)
(event-1-payment!)
(event-2-payment!)
;; ... see how allocations change

;; Or run all at once
(replay-all!)
; Syntax error compiling at (.calva/repl.calva-repl:4330:1).
; Unable to resolve symbol: replay-all! in this context
clj꞉wakecap-test꞉> 
; Syntax error compiling at (.calva/repl.calva-repl:4330:1).
; Unable to resolve symbol: replay-all! in this context
clj꞉wakecap-test꞉> 
; Syntax error compiling at (.calva/repl.calva-repl:4330:1).
; Unable to resolve symbol: replay-all! in this context
clj꞉wakecap-test꞉> 
(require '[wakecap-test :refer :all])
nil
clj꞉wakecap-test꞉> 
; Syntax error compiling at (dev/wakecap_test.clj:472:3).
; Unable to resolve symbol: event-0-setup! in this context
clj꞉wakecap-test꞉> 
; Evaluating file: wakecap_test.clj
; 
; Syntax error compiling at (dev/wakecap_test.clj:64:5).
; No such var: ops/create-facility
; Evaluation of file wakecap_test.clj failed: class clojure.lang.Compiler$CompilerException
clj꞉wakecap-test꞉> 
nil
clj꞉lms.core꞉> 
#'lms.core/reload!
clj꞉lms.core꞉> 
(reload!)
:reloaded
clj꞉lms.core꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; ✓ Database ready with schema
; ✓ Facility PIP-1283621 created
; ✓ Contract 3290-H-2025 created with 12 installments
; 
; Ready! Try:
;   (show-facility-state)
;   (show-contract-state)
; 
; ═══════════════════════════════════════════════════════════
; EVENT 0: Contract boarded (disbursement: Jul 7, 2025)
; ═══════════════════════════════════════════════════════════
; Schedule:
;   • Installments 1-11: Profit only (128,700.13 each)
;   • Installment 12: Principal (9,652,509.65) + Profit
;   • Management fee: 277,509.66 (due Oct 7)
; 
; Next: (event-1-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:06:03.584Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T19:06:39.589Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T19:06:39.603Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-24T19:06:41.207Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-10
; Amount:    128,700.13 SAR
; Reference: TRF-001
; Label:     PROFIT-AUG (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 0.00 / 128,700.13  overdue
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,345,720.74 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:07:05.896Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 2: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-09-08
; Amount:    128,700.13 SAR
; Reference: TRF-002
; Label:     PROFIT-SEP (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,217,020.61 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-3-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:07:15.801Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 3: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-10-05
; Amount:    277,509.66 SAR
; Reference: TRF-003
; Label:     MGMT-FEE (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,939,510.95 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-4-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:07:21.200Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 4: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-10-09
; Amount:    128,700.13 SAR
; Reference: TRF-004
; Label:     PROFIT-OCT (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,810,810.82 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-5-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:07:30.888Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:16.514Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533325, :reason "mistake"}
; 2026-01-24T19:16:16.580Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:23.289Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533325, :reason "mistake"}
; 2026-01-24T19:16:23.330Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:30.315Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533325, :reason "mistake"}
; 2026-01-24T19:16:30.337Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:42.400Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533325, :reason "mistake"}
; 2026-01-24T19:16:42.454Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:49.435Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:51.018Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:16:57.687Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533325, :reason "mistake"}
; 2026-01-24T19:16:57.718Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:17:07.291Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:17:09.204Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:17:31.546Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533324, :reason "mistake"}
; 2026-01-24T19:17:31.645Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; ✓ Database ready with schema
; ✓ Facility PIP-1283621 created
; ✓ Contract 3290-H-2025 created with 12 installments
; 
; Ready! Try:
;   (show-facility-state)
;   (show-contract-state)
; 
; ═══════════════════════════════════════════════════════════
; EVENT 0: Contract boarded (disbursement: Jul 7, 2025)
; ═══════════════════════════════════════════════════════════
; Schedule:
;   • Installments 1-11: Profit only (128,700.13 each)
;   • Installment 12: Principal (9,652,509.65) + Profit
;   • Management fee: 277,509.66 (due Oct 7)
; 
; Next: (event-1-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:21:45.375Z 32f3b319732d ERROR [lms.handlers:116] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj:  98
;                                                                 lms.contract/get-contract                    contract.clj: 111
;                                                                   datomic.client.api/pull                         api.clj: 387
;                                                         datomic.client.api.protocols/fn/G                   protocols.clj: 127
;                                                                  datomic.core.local-db/fn                    local_db.clj:  56
;                                                                  datomic.core.pull/pull-1                        pull.clj: 509
;                                                                   datomic.core.pull/pull*                        pull.clj: 403
;                                                                datomic.core.db/resolve-id                          db.clj: 595
;                                                       datomic.core.db/extended-resolve-id                          db.clj: 584
;                                                        datomic.core.db/resolve-lookup-ref                          db.clj: 561
;                                                          datomic.core.db/attr-index-range                          db.clj:1052
;                                                               datomic.core.db.Db/seekAVET                          db.clj:2269
;                                                                   datomic.core.btset/seek                       btset.clj: 405
;                                                    datomic.dev-local.btindex.BTIndex/seek                     btindex.clj: 310
;                                              datomic.dev-local.btindex.BTIndexBranch/seek                     btindex.clj: 185
;                                                datomic.dev-local.btindex.BTIndexLeaf/seek                     btindex.clj: 249
;                                             datomic.dev-local.btindex.BTIndexLeaf/bsearch                     btindex.clj: 206
;                                      datomic.dev-local.btindex/lookup-cmp/reify/compareTo                     btindex.clj: 275
;                                                datomic.dev-local.local-log.LocalLog/valAt                   local_log.clj:  56
;                                                   datomic.dev-local.tx/datom-lookup-valfn                          tx.clj: 401
;                                                    datomic.dev-local.tx/keyoff-datom-bbuf                          tx.clj: 374
;                                                           datomic.dev-local.io/read-n-buf                          io.clj:  72
;                                                          datomic.dev-local.io/read-n-bbuf                          io.clj:  66
;                                                           sun.nio.ch.FileChannelImpl.read            FileChannelImpl.java:1152
;                                                       sun.nio.ch.FileChannelImpl.implRead            FileChannelImpl.java:1160
;                                                     sun.nio.ch.FileChannelImpl.ensureOpen            FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
; 
; 
; 2026-01-24T19:21:57.676Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:21:58.746Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:00.246Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:01.403Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:06.625Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
nil
clj꞉lms.core꞉> 
; 2026-01-24T19:22:13.516Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T19:22:15.678Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:17.583Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:18.625Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:19.256Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:20.499Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:23.746Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:25.033Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
; 2026-01-24T19:22:30.212Z 32f3b319732d ERROR [lms.handlers:69] - Error listing contracts
;                                 java.lang.Thread.run              Thread.java:1474
;   java.util.concurrent.ThreadPoolExecutor$Worker.run  ThreadPoolExecutor.java: 614
;    java.util.concurrent.ThreadPoolExecutor.runWorker  ThreadPoolExecutor.java:1090
;                  java.util.concurrent.FutureTask.run          FutureTask.java: 328
;                                                  ...
;                            clojure.core/bound-fn*/fn                 core.clj:2020
;               datomic.core.common/pooled-mapv/fn{x2}               common.clj: 490
;                          datomic.core.datalog/fn{x2}              datalog.clj: 676
;                         datomic.core.datalog/fn/join              datalog.clj: 658
;                          datomic.core.datalog/fn{x2}              datalog.clj: 549
;                          datomic.core.db.Db/seekAEVT                   db.clj:2279
;                              datomic.core.btset/seek                btset.clj: 405
;               datomic.dev-local.btindex.BTIndex/seek              btindex.clj: 310
;         datomic.dev-local.btindex.BTIndexBranch/seek              btindex.clj: 185
;           datomic.dev-local.btindex.BTIndexLeaf/seek              btindex.clj: 249
;        datomic.dev-local.btindex.BTIndexLeaf/bsearch              btindex.clj: 206
; datomic.dev-local.btindex/lookup-cmp/reify/compareTo              btindex.clj: 275
;           datomic.dev-local.local-log.LocalLog/valAt            local_log.clj:  56
;              datomic.dev-local.tx/datom-lookup-valfn                   tx.clj: 401
;               datomic.dev-local.tx/keyoff-datom-bbuf                   tx.clj: 374
;                      datomic.dev-local.io/read-n-buf                   io.clj:  72
;                     datomic.dev-local.io/read-n-bbuf                   io.clj:  66
;                      sun.nio.ch.FileChannelImpl.read     FileChannelImpl.java:1152
;                  sun.nio.ch.FileChannelImpl.implRead     FileChannelImpl.java:1160
;                sun.nio.ch.FileChannelImpl.ensureOpen     FileChannelImpl.java: 169
; java.nio.channels.ClosedChannelException:
;               clojure.lang.ExceptionInfo: processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?e :contract/id ?id], message: java.nio.channels.ClosedChannelException"
; 
; 
(reload!)
:reloaded
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-24T19:22:55.661Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T19:23:00.485Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T19:23:00.497Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-24T19:23:00.738Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-24T19:23:02.555Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-10
; Amount:    128,700.13 SAR
; Reference: TRF-001
; Label:     PROFIT-AUG (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 0.00 / 128,700.13  overdue
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,345,720.74 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:23:18.612Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:24:02.412Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533322, :reason "mistake"}
; 2026-01-24T19:24:02.458Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
[{:seq 1, :date "2025-07-24", :amount 92503.22M, :reference "PAY-22", :label "Management Fee", :bank "Riyad Bank"}
 {:seq 2, :date "2025-08-07", :amount 128700.13M, :reference "PAY-27", :label "Transfer", :bank "Riyad Bank"}
 {:seq 3, :date "2025-08-24", :amount 92503.22M, :reference "PAY-29", :label "Management Fee", :bank "Riyad Bank"}
 {:seq 4, :date "2025-09-08", :amount 128700.13M, :reference "PAY-34", :label "Transfer", :bank "Al Rajhi Bank"}
 {:seq 5, :date "2025-09-29", :amount 92503.22M, :reference "PAY-36", :label "Management Fee", :bank "Riyad Bank"}
 {:seq 6, :date "2025-10-06", :amount 128700.13M, :reference "PAY-39", :label "Transfer", :bank "Riyad Bank"}
 {:seq 7, :date "2025-11-05", :amount 128700.13M, :reference "PAY-42", :label "Transfer", :bank "Al Rajhi Bank"}
 {:seq 8, :date "2026-01-12", :amount 128700.13M, :reference "PAY-46", :label "Transfer", :bank "Riyad Bank"}]
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-07-24
; Amount:    92,503.22 SAR
; Reference: PAY-22
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 92,503.22 / 128,700.13  partial
;   # 2  Due: 2025-09-07  Paid: 0.00 / 128,700.13  overdue
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,381,917.65 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:26:03.826Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:34:15.211Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
(reload!)
; Syntax error compiling at (.calva/repl.calva-repl:5119:1).
; Unable to resolve symbol: reload! in this context
clj꞉wakecap-test꞉> 
#'lms.core/reload!
clj꞉lms.core꞉> 
(reload!)
:reloaded
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-01-24T19:35:03.788Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T19:35:17.333Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T19:35:17.349Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-24T19:35:18.919Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 2: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-07
; Amount:    128,700.13 SAR
; Reference: PAY-27
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 92,503.22 / 128,700.13  partial
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,253,217.52 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-3-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:36:49.671Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
#'lms.core/reload!
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-01-24T19:43:25.690Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T19:43:27.984Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T19:43:28.043Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:43:48.424Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533324, :reason "mistake"}
; 2026-01-24T19:43:48.475Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:43:58.756Z 32f3b319732d INFO [lms.handlers:248] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533326, :reason "mistake"}
; 2026-01-24T19:43:58.808Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:44:02.052Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T19:44:03.307Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-07-24
; Amount:    92,503.22 SAR
; Reference: PAY-22
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 92,503.22 / 128,700.13  partial
;   # 2  Due: 2025-09-07  Paid: 0.00 / 128,700.13  overdue
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,381,917.65 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T19:44:23.138Z 32f3b319732d INFO [lms.handlers:108] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-01-24T20:02:56.924Z 32f3b319732d INFO [lms.core:95] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T20:02:59.886Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T20:02:59.924Z 32f3b319732d INFO [lms.handlers:109] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:04:23.621Z 32f3b319732d INFO [lms.handlers:249] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533330, :reason "mistake"}
; 2026-01-24T20:04:23.651Z 32f3b319732d INFO [lms.handlers:109] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:04:36.633Z 32f3b319732d WARN [lms.handlers:267] - Transaction already reversed {:tx-id 13194139533330, :reversal-tx-id 13194139533332, :error :already-reversed}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-01-24T20:05:32.522Z 32f3b319732d INFO [lms.core:95] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T20:05:35.219Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T20:05:35.248Z 32f3b319732d INFO [lms.handlers:109] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-01-24T20:07:19.444Z 32f3b319732d INFO [lms.core:95] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T20:07:23.631Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T20:07:23.696Z 32f3b319732d INFO [lms.handlers:109] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:07:29.322Z 32f3b319732d INFO [lms.handlers:313] - Reversal retracted {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533332, :reason "mistake"}
; 2026-01-24T20:07:29.345Z 32f3b319732d INFO [lms.handlers:109] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-01-24T20:16:35.524Z 32f3b319732d INFO [lms.core:95] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-01-24T20:16:37.820Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-01-24T20:16:37.895Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:16:48.490Z 32f3b319732d INFO [lms.handlers:252] - Transaction reversed {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533330, :reason "mistake"}
; 2026-01-24T20:16:48.526Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:16:58.244Z 32f3b319732d WARN [lms.handlers:271] - Transaction already reversed {:tx-id 13194139533330, :reversal-tx-id 13194139533337, :error :already-reversed}
; 2026-01-24T20:16:58.316Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:17:06.935Z 32f3b319732d INFO [lms.handlers:316] - Reversal retracted {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :tx-id 13194139533337, :reason "mistake"}
; 2026-01-24T20:17:06.975Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 2: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-07
; Amount:    128,700.13 SAR
; Reference: PAY-27
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 92,503.22 / 128,700.13  partial
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,253,217.52 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-3-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:17:25.167Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 3: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-24
; Amount:    92,503.22 SAR
; Reference: PAY-29
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 56,306.31 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,160,714.30 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-4-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:17:39.245Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 4: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-09-08
; Amount:    128,700.13 SAR
; Reference: PAY-34
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 185,006.44 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,032,014.17 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-5-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:24:31.090Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:24:33.315Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:24:39.837Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 5: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-09-29
; Amount:    92,503.22 SAR
; Reference: PAY-36
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,939,510.95 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-6-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:24:57.806Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:24:59.902Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:25:04.763Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-24T20:25:46.056Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 6: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-10-06
; Amount:    128,700.13 SAR
; Reference: PAY-39
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,810,810.82 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-7-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:26:49.611Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 7: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-11-05
; Amount:    128,700.13 SAR
; Reference: PAY-42
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 128,700.13 / 128,700.13  paid
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,682,110.69 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-8-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:26:57.237Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 8: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2026-01-12
; Amount:    128,700.13 SAR
; Reference: PAY-46
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 128,700.13 / 128,700.13  paid
;   # 5  Due: 2025-12-07  Paid: 128,700.13 / 128,700.13  paid
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,553,410.56 SAR
;   Credit:      0.00 SAR
nil
clj꞉wakecap-test꞉> 
; 2026-01-24T20:27:02.008Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-01-25T11:31:57.654Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-01-25T11:32:32.417Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-02T20:34:52.335Z 32f3b319732d INFO [lms.core:93] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-02T20:35:04.652Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-02-02T20:35:04.675Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-02-02T20:35:07.966Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-02T20:42:34.584Z 32f3b319732d INFO [lms.core:93] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; ✓ Database ready with schema
; ✓ Facility PIP-1283621 created
; Execution error (ExceptionInfo) at lms.operations/board-contract (operations.clj:542).
; Every installment must include :installment/remaining-principal
clj꞉wakecap-test꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; ✓ Database ready with schema
; ✓ Facility PIP-1283621 created
; ✓ Contract 3290-H-2025 created with 12 installments
; 
; Ready! Try:
;   (show-facility-state)
;   (show-contract-state)
; 
; ═══════════════════════════════════════════════════════════
; EVENT 0: Contract boarded (disbursement: Jul 7, 2025)
; ═══════════════════════════════════════════════════════════
; Schedule:
;   • Installments 1-11: Profit only (128,700.13 each)
;   • Installment 12: Principal (9,652,509.65) + Profit
;   • Management fee: 277,509.66 (due Oct 7)
; 
; Next: (event-1-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-02-02T20:43:30.813Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-02-02T20:43:30.826Z 32f3b319732d INFO [lms.handlers:62] - Listed contracts {:count 1, :filter nil}
; 2026-02-02T20:43:32.662Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-07-24
; Amount:    92,503.22 SAR
; Reference: PAY-22
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 92,503.22 / 128,700.13  partial
;   # 2  Due: 2025-09-07  Paid: 0.00 / 128,700.13  overdue
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,381,917.65 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-02-02T20:44:11.918Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-02T20:44:27.935Z 32f3b319732d INFO [lms.handlers:259] - Payment retracted {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :payment-id #uuid "092599e7-e439-4cd9-8113-b8f53c143220", :reason :erroneous-entry}
; 2026-02-02T20:44:27.974Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-02T20:44:31.904Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-07-24
; Amount:    92,503.22 SAR
; Reference: PAY-22
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 92,503.22 / 128,700.13  partial
;   # 2  Due: 2025-09-07  Paid: 0.00 / 128,700.13  overdue
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,381,917.65 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 2: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-07
; Amount:    128,700.13 SAR
; Reference: PAY-27
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 0.00 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 92,503.22 / 128,700.13  partial
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,253,217.52 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-3-payment!)
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 3: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-08-24
; Amount:    92,503.22 SAR
; Reference: PAY-29
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 56,306.31 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,160,714.30 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-4-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-02-02T20:46:01.520Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 4: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-09-08
; Amount:    128,700.13 SAR
; Reference: PAY-34
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 185,006.44 / 277,509.66  unpaid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 11,032,014.17 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-5-payment!)
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 5: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-09-29
; Amount:    92,503.22 SAR
; Reference: PAY-36
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 0.00 / 128,700.13  overdue
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,939,510.95 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-6-payment!)
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 6: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-10-06
; Amount:    128,700.13 SAR
; Reference: PAY-39
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 0.00 / 128,700.13  overdue
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,810,810.82 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-7-payment!)
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 7: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-11-05
; Amount:    128,700.13 SAR
; Reference: PAY-42
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 128,700.13 / 128,700.13  paid
;   # 5  Due: 2025-12-07  Paid: 0.00 / 128,700.13  overdue
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,682,110.69 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-8-payment!)
nil
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; EVENT 8: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2026-01-12
; Amount:    128,700.13 SAR
; Reference: PAY-46
; Label:     Transfer (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 128,700.13 / 128,700.13  paid
;   # 5  Due: 2025-12-07  Paid: 128,700.13 / 128,700.13  paid
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,553,410.56 SAR
;   Credit:      0.00 SAR
nil
clj꞉wakecap-test꞉> 
; 2026-02-02T20:46:22.736Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-02T20:46:25.184Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; FACILITY STATE
; ═══════════════════════════════════════════════════════════
; External ID:   PIP-1283621
; Customer:      WakeCap Saudi Information Systems Technology Company
; CR Number:     7016779188
; Funder:        SKFH
; Status:        :active
; ─────────────────────────────────────────────────────────────
; Limit:         10,000,000.00 SAR
; Utilization:   9,652,509.65 SAR
; Available:     347,490.35 SAR
; ─────────────────────────────────────────────────────────────
; Contracts:     1
;   • 3290-H-2025 - 9,652,509.65 SAR ( active )
{:customer-id "7016779188",
 :limit 10000000M,
 :funder "SKFH",
 :utilization 9652509.65M,
 :contracts
 [{:id #uuid "c1283621-0000-0000-0000-000000000001",
   :external-id "3290-H-2025",
   :principal 9652509.65M,
   :status :active}],
 :external-id "PIP-1283621",
 :status :active,
 :id #uuid "f1283621-0000-0000-0000-000000000001",
 :available 347490.35M,
 :created-at #inst "2026-02-02T20:43:22.992-00:00",
 :customer-name "WakeCap Saudi Information Systems Technology Company"}
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; CONTRACT STATE
; ═══════════════════════════════════════════════════════════
; External ID:   3290-H-2025
; Customer:      WakeCap Saudi Information Systems Technology Company
; Status:        :active
; Start Date:    #inst "2025-07-07T00:00:00.000-00:00"
; Maturity:      #inst "2026-07-07T00:00:00.000-00:00" (derived)
; 
; ─── CONTRACT TERMS ───
; Principal:     9,652,509.65 SAR
; Facility:      nil
; 
; ─── COMMODITY (MURABAHA) ───
; Description:   Palm Oil
; Quantity:      2591.567M
; Unit Price:    3724.585M
; Vendor:        Nafaes
; 
; ─── BANKING ───
; Disbursement:  SA2420000002680766869940
;                Riyad Bank
; Collection:    SA1030100809000012836211
; 
; ─── FEES ───
;   management      277509.66 SAR  Paid:    277509.66  Status: paid
; 
; ─── INSTALLMENTS ───
;   #   Due Date      Principal        Profit         Paid    Status
;   ─── ──────────── ──────────────── ───────────── ─────────── ───────────
;    1  2025-08-07            0.00     128700.13   128700.13  paid
;    2  2025-09-07            0.00     128700.13   128700.13  paid
;    3  2025-10-07            0.00     128700.13   128700.13  paid
;    4  2025-11-07            0.00     128700.13   128700.13  paid
;    5  2025-12-07            0.00     128700.13   128700.13  paid
;    6  2026-01-07            0.00     128700.13        0.00  overdue
;    7  2026-02-07            0.00     128700.13        0.00  scheduled
;    8  2026-03-07            0.00     128700.13        0.00  scheduled
;    9  2026-04-07            0.00     128700.13        0.00  scheduled
;   10  2026-05-07            0.00     128700.13        0.00  scheduled
;   11  2026-06-07            0.00     128700.13        0.00  scheduled
;   12  2026-07-07      9652509.65     128700.13        0.00  scheduled
; 
; ─── TOTALS ───
; Total Fees Due:           277509.66 SAR
; Total Principal Due:     9652509.65 SAR
; Total Profit Due:        1544401.56 SAR
;                      ──────────────────
; Total Receivable:       11474420.87 SAR
; 
; Total Paid:               921010.31 SAR
; Outstanding:            10553410.56 SAR
; Credit Balance:                0.00 SAR
{:total-fees-due 277509.66M,
 :credit-balance 0.00M,
 :installments
 ({:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 128700.13M,
   :total-paid 128700.13M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :paid,
   :id #uuid "e5d65928-0861-40ad-8711-6912bcda44c0",
   :due-date #inst "2025-08-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent 0,
   :seq 1,
   :outstanding 0.00M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 128700.13M,
   :total-paid 128700.13M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :paid,
   :id #uuid "c162340b-ebb0-412b-994b-fb6a848862fe",
   :due-date #inst "2025-09-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -14,
   :seq 2,
   :outstanding 0.00M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 128700.13M,
   :total-paid 128700.13M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :paid,
   :id #uuid "407e92bb-34bb-4b0f-b4c4-27fdcf8881cd",
   :due-date #inst "2025-10-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -1,
   :seq 3,
   :outstanding 0.00M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 128700.13M,
   :total-paid 128700.13M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :paid,
   :id #uuid "f0c91dd7-3161-4b40-911f-4c9295d772f0",
   :due-date #inst "2025-11-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -2,
   :seq 4,
   :outstanding 0.00M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 128700.13M,
   :total-paid 128700.13M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :paid,
   :id #uuid "dd4e8496-8def-46a3-9263-1b319917693c",
   :due-date #inst "2025-12-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent 36,
   :seq 5,
   :outstanding 0.00M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :overdue,
   :id #uuid "38327cd7-2959-4827-9990-79f255a4622d",
   :due-date #inst "2026-01-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent 26,
   :seq 6,
   :outstanding 128700.13M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :scheduled,
   :id #uuid "1087e6f9-58f3-48fb-a2f7-ca72f4fc89ec",
   :due-date #inst "2026-02-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -4,
   :seq 7,
   :outstanding 128700.13M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :scheduled,
   :id #uuid "8739f08a-46f5-4629-bb0c-31d338076e81",
   :due-date #inst "2026-03-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -32,
   :seq 8,
   :outstanding 128700.13M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :scheduled,
   :id #uuid "14ee6dbe-37fa-4566-98a1-5fdcb1e70a9e",
   :due-date #inst "2026-04-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -63,
   :seq 9,
   :outstanding 128700.13M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :scheduled,
   :id #uuid "99829b97-ef1c-48f4-a1dd-a0e6cb27d5cf",
   :due-date #inst "2026-05-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -93,
   :seq 10,
   :outstanding 128700.13M}
  {:principal-due 0M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 128700.13M,
   :principal-paid 0M,
   :status :scheduled,
   :id #uuid "021ed9cc-f54d-414d-a083-236e0df98acd",
   :due-date #inst "2026-06-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -124,
   :seq 11,
   :outstanding 128700.13M}
  {:principal-due 9652509.65M,
   :remaining-principal 9652509.65M,
   :profit-paid 0.00M,
   :total-paid 0.00M,
   :total-due 9781209.78M,
   :principal-paid 0.00M,
   :status :scheduled,
   :id #uuid "942cea80-666d-4957-9b4d-5c3878824161",
   :due-date #inst "2026-07-07T00:00:00.000-00:00",
   :profit-due 128700.13M,
   :days-delinquent -154,
   :seq 12,
   :outstanding 9781209.78M}),
 :total-fees-paid 277509.66M,
 :total-profit-paid 643500.65M,
 :deposit-held 0M,
 :contract
 {:customer-id "7016779188",
  :disbursement-iban "SA2420000002680766869940",
  :refinances-id nil,
  :virtual-iban "SA1030100809000012836211",
  :disbursement-bank "Riyad Bank",
  :commodity {:quantity 2591.567M, :unit-price 3724.585M, :description "Palm Oil", :vendor "Nafaes"},
  :external-id "3290-H-2025",
  :facility-id nil,
  :maturity-date #inst "2026-07-07T00:00:00.000-00:00",
  :status :active,
  :id #uuid "c1283621-0000-0000-0000-000000000001",
  :security-deposit-required 0M,
  :step-up-terms nil,
  :principal 9652509.65M,
  :start-date #inst "2025-07-07T00:00:00.000-00:00",
  :customer-name "WakeCap Saudi Information Systems Technology Company"},
 :total-profit-due 1544401.56M,
 :total-principal-paid 0.00M,
 :total-outstanding 10553410.56M,
 :fees
 ({:id #uuid "e9a9ecfa-fbf5-4543-98ba-1d65682a512b",
   :type :management,
   :amount 277509.66M,
   :due-date #inst "2025-10-07T00:00:00.000-00:00",
   :paid 277509.66M,
   :outstanding 0.00M,
   :status :paid}),
 :total-principal-due 9652509.65M}
clj꞉wakecap-test꞉> 
; 
; ─── TRANSACTIONS ───
; 2025-07-24  payment             92,503.22  PAY-22
; 2025-08-07  payment            128,700.13  PAY-27
; 2025-08-24  payment             92,503.22  PAY-29
; 2025-09-08  payment            128,700.13  PAY-34
; 2025-09-29  payment             92,503.22  PAY-36
; 2025-10-06  payment            128,700.13  PAY-39
; 2025-11-05  payment            128,700.13  PAY-42
; 2026-01-12  payment            128,700.13  PAY-46
; 2026-02-02  admin                       -  
({:event-type :payment,
  :id #uuid "7233c591-e7f5-43ab-9b33-4d2620f94fa8",
  :amount 92503.22M,
  :date #inst "2025-07-24T00:00:00.000-00:00",
  :reference "PAY-22",
  :channel nil}
 {:event-type :payment,
  :id #uuid "372133ca-9a8f-4d6e-a708-10fd05bfc41b",
  :amount 128700.13M,
  :date #inst "2025-08-07T00:00:00.000-00:00",
  :reference "PAY-27",
  :channel nil}
 {:event-type :payment,
  :id #uuid "4442744b-d5cf-420a-90c4-b34b89023939",
  :amount 92503.22M,
  :date #inst "2025-08-24T00:00:00.000-00:00",
  :reference "PAY-29",
  :channel nil}
 {:event-type :payment,
  :id #uuid "fdbb4c22-a8f6-4d0b-a7a1-43358a667af3",
  :amount 128700.13M,
  :date #inst "2025-09-08T00:00:00.000-00:00",
  :reference "PAY-34",
  :channel nil}
 {:event-type :payment,
  :id #uuid "28b786e4-3bf7-468d-a6a3-f6051296dd12",
  :amount 92503.22M,
  :date #inst "2025-09-29T00:00:00.000-00:00",
  :reference "PAY-36",
  :channel nil}
 {:event-type :payment,
  :id #uuid "34fa0a48-9259-4690-bdf9-985b23cc4120",
  :amount 128700.13M,
  :date #inst "2025-10-06T00:00:00.000-00:00",
  :reference "PAY-39",
  :channel nil}
 {:event-type :payment,
  :id #uuid "79e56325-ec7d-4b40-844f-d76cbc82f581",
  :amount 128700.13M,
  :date #inst "2025-11-05T00:00:00.000-00:00",
  :reference "PAY-42",
  :channel nil}
 {:event-type :payment,
  :id #uuid "3feb293b-3ffe-49e8-93ef-75e821d46168",
  :amount 128700.13M,
  :date #inst "2026-01-12T00:00:00.000-00:00",
  :reference "PAY-46",
  :channel nil}
 {:event-type :admin,
  :type :boarding,
  :date #inst "2026-02-02T20:43:23.001-00:00",
  :author "system-import",
  :note nil,
  :tx-id 13194139533320})
clj꞉wakecap-test꞉> 

(let [db  (d/db (db/get-connection))
      hdb (d/history db)]
  (d/q {:query '[:find ?payment-id ?amount ?reason ?note ?retract-time
                  :in $history $current ?contract
                  :where
                  [$history ?p :payment/contract ?contract]
                  [$history ?p :payment/id ?payment-id]
                  [$history ?p :payment/amount ?amount]
                  [$current ?tx :tx/corrects ?p]
                  [$current ?tx :tx/reason ?reason]
                  [$current ?tx :db/txInstant ?retract-time]
                  [(get-else $current ?tx :tx/note "") ?note]]
         :args [hdb db [:contract/id contract-id]]}))
; Execution error (IllegalArgumentException) at datomic.client.api.protocols/fn$G (protocols.clj:72).
; No implementation of method: :db of protocol: #'datomic.client.api.protocols/Connection found for class: clojure.lang.Atom
clj꞉wakecap-test꞉> 
[[#uuid "092599e7-e439-4cd9-8113-b8f53c143220"
  92503.22M
  :erroneous-entry
  "sorry "
  #inst "2026-02-02T20:44:27.928-00:00"]]
clj꞉wakecap-test꞉> 
; 2026-02-02T21:10:20.319Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-02T21:10:27.544Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-02T21:10:58.476Z 32f3b319732d INFO [lms.core:93] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-02T21:11:01.484Z 32f3b319732d INFO [lms.handlers:36] - Database schema installed
; 2026-02-02T21:11:01.541Z 32f3b319732d INFO [lms.handlers:112] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
(require '[lms.settlement :as s] :reload)
nil
clj꞉lms.core꞉> 
(let [c (db/get-connection)
      db (datomic.client.api/db c)]
  (s/calculate-settlement (contract/contract-state db (parse-uuid "c1283621-0000-0000-0000-000000000001") (java.util.Date.))))

#<Delay@1499a8c0: :not-delivered>
clj꞉wakecap-test꞉> 
; Execution error (ClassCastException) at wakecap-test/eval274343 (REPL:6174).
; class datomic.dev_local.impl.DurableConnection cannot be cast to class clojure.lang.IFn (datomic.dev_local.impl.DurableConnection and clojure.lang.IFn are in unnamed module of loader 'app')
clj꞉wakecap-test꞉> 
; Execution error (ClassCastException) at wakecap-test/eval274345 (REPL:6175).
; class datomic.dev_local.impl.DurableConnection cannot be cast to class java.util.concurrent.Future (datomic.dev_local.impl.DurableConnection is in unnamed module of loader 'app'; java.util.concurrent.Future is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
(let [conn (db/get-connection)
      db   (datomic.client.api/db conn)
      date  #inst "2026-02-02"
      state (contract/contract-state db
                                     (parse-uuid "c1283621-0000-0000-0000-000000000001")
                                     date)]
  (s/calculate-settlement state date 90))



{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :annual-rate 0.15483871128154838752M,
 :current-period-end #inst "2026-02-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 90,
 :settlement-amount 10262797.36322580645163M,
 :accrued-unpaid-profit 236642.17451612903226M,
 :accrued-profit 880142.82451612903226M,
 :unearned-profit 664258.73548387096774M,
 :penalty-amount 373645.53870967741937M,
 :current-period-start #inst "2026-01-07T00:00:00.000-00:00",
 :accrued-days 26,
 :daily-profit 4151.6170967741935486M,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :annual-rate 0.15483871128154838752M,
 :current-period-end #inst "2026-02-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 0,
 :settlement-amount 9889151.8245161290322600M,
 :accrued-unpaid-profit 236642.17451612903226M,
 :accrued-profit 880142.82451612903226M,
 :unearned-profit 664258.73548387096774M,
 :penalty-amount 0E-16M,
 :current-period-start #inst "2026-01-07T00:00:00.000-00:00",
 :accrued-days 26,
 :daily-profit 4151.6170967741935486M,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :annual-rate 0.15483871128154838752M,
 :current-period-end #inst "2026-02-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 0,
 :settlement-amount 9889151.8245161290322600M,
 :accrued-unpaid-profit 236642.17451612903226M,
 :accrued-profit 880142.82451612903226M,
 :unearned-profit 664258.73548387096774M,
 :effective-accrued-unpaid-profit 236642.17451612903226M,
 :penalty-amount 0E-16M,
 :current-period-start #inst "2026-01-07T00:00:00.000-00:00",
 :refund-due nil,
 :accrued-days 26,
 :daily-profit 4151.6170967741935486M,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :annual-rate 0.15483871128154838752M,
 :current-period-end #inst "2026-02-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 90,
 :settlement-amount 10262797.36322580645163M,
 :accrued-unpaid-profit 236642.17451612903226M,
 :accrued-profit 880142.82451612903226M,
 :unearned-profit 664258.73548387096774M,
 :effective-accrued-unpaid-profit 236642.17451612903226M,
 :penalty-amount 373645.53870967741937M,
 :current-period-start #inst "2026-01-07T00:00:00.000-00:00",
 :refund-due nil,
 :accrued-days 26,
 :daily-profit 4151.6170967741935486M,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :current-period-end #inst "2026-02-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 90,
 :settlement-amount 10283140.28700000000000M,
 :accrued-unpaid-profit 240793.79161290322581M,
 :accrued-profit 884294.44161290322581M,
 :unearned-profit 660107.11838709677419M,
 :effective-accrued-unpaid-profit 240793.79161290322581M,
 :penalty-amount 389836.84538709677419M,
 :current-period-start #inst "2026-01-07T00:00:00.000-00:00",
 :refund-due nil,
 :accrued-days 27,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
; Execution error (IllegalArgumentException) at java.util.Date/parse (Date.java:616).
; null
clj꞉lms.core꞉> 
; Execution error (ClassCastException) at lms.core/eval286088 (REPL:6188).
; class java.util.Date cannot be cast to class clojure.lang.IFn (java.util.Date is in module java.base of loader 'bootstrap'; clojure.lang.IFn is in unnamed module of loader 'app')
clj꞉lms.core꞉> 
#inst "2026-02-07T00:00:00.000-00:00"
clj꞉lms.core꞉> 
{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :current-period-end #inst "2026-03-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 90,
 :settlement-amount 10300161.9170967741935500M,
 :accrued-unpaid-profit 257400.2600000000000000M,
 :accrued-profit 900900.9100000000000000M,
 :unearned-profit 643500.6500000000000000M,
 :effective-accrued-unpaid-profit 257400.2600000000000000M,
 :penalty-amount 390252.00709677419355M,
 :current-period-start #inst "2026-02-07T00:00:00.000-00:00",
 :refund-due nil,
 :accrued-days 0,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
{:outstanding-fees 0.00M,
 :profit-already-paid 643500.65M,
 :current-period-end #inst "2026-02-07T00:00:00.000-00:00",
 :credit-balance 0.00M,
 :manual-override? false,
 :penalty-days 90,
 :settlement-amount 10278850.28266666666667M,
 :accrued-unpaid-profit 236642.17451612903226M,
 :accrued-profit 880142.82451612903226M,
 :unearned-profit 664258.73548387096774M,
 :effective-accrued-unpaid-profit 236642.17451612903226M,
 :penalty-amount 389698.45815053763441M,
 :current-period-start #inst "2026-01-07T00:00:00.000-00:00",
 :refund-due nil,
 :accrued-days 26,
 :outstanding-principal 9652509.65M}
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-03T09:17:40.080Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-03T09:17:51.894Z 32f3b319732d INFO [lms.handlers:37] - Database schema installed
; 2026-02-03T09:17:51.933Z 32f3b319732d INFO [lms.handlers:113] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-03T09:18:07.259Z 32f3b319732d INFO [lms.handlers:320] - Settlement calculated {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :date "2026-02-10", :penalty-days 90, :settlement-amount 10312616.768387096774187M}
; 2026-02-03T09:18:41.404Z 32f3b319732d INFO [lms.handlers:320] - Settlement calculated {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :date "2026-02-10", :penalty-days 90, :settlement-amount 10141427.20874423963133M}
; 2026-02-03T09:19:45.204Z 32f3b319732d INFO [lms.handlers:260] - Payment retracted {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :payment-id #uuid "7233c591-e7f5-43ab-9b33-4d2620f94fa8", :reason :erroneous-entry}
; 2026-02-03T09:19:45.253Z 32f3b319732d INFO [lms.handlers:113] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ═══════════════════════════════════════════════════════════
; EVENT 1: Payment received
; ═══════════════════════════════════════════════════════════
; Date:      2025-07-24
; Amount:    92,503.22 SAR
; Reference: PAY-22
; Label:     Management Fee (customer's intent)
; 
; ─── ALLOCATION RESULT ───
; Fees:
;   management    Due: 2025-10-07  Paid: 277,509.66 / 277,509.66  paid
; 
; Installments (showing first 6):
;   # 1  Due: 2025-08-07  Paid: 128,700.13 / 128,700.13  paid
;   # 2  Due: 2025-09-07  Paid: 128,700.13 / 128,700.13  paid
;   # 3  Due: 2025-10-07  Paid: 128,700.13 / 128,700.13  paid
;   # 4  Due: 2025-11-07  Paid: 128,700.13 / 128,700.13  paid
;   # 5  Due: 2025-12-07  Paid: 128,700.13 / 128,700.13  paid
;   # 6  Due: 2026-01-07  Paid: 0.00 / 128,700.13  overdue
; 
; Totals:
;   Outstanding: 10,553,410.56 SAR
;   Credit:      0.00 SAR
; 
; Next: (event-2-payment!)
nil
clj꞉wakecap-test꞉> 
; 2026-02-03T09:20:33.105Z 32f3b319732d INFO [lms.handlers:113] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; Execution error (ClassCastException) at datomic.dev-local.tx/datom-lookup-valfn (tx.clj:397).
; class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; Execution error (ClassCastException) at datomic.dev-local.tx/datom-lookup-valfn (tx.clj:397).
; class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
; 
; ═══════════════════════════════════════════════════════════
; FACILITY STATE
; ═══════════════════════════════════════════════════════════
; External ID:   PIP-1283621
; Customer:      WakeCap Saudi Information Systems Technology Company
; CR Number:     7016779188
; Funder:        SKFH
; Status:        :active
; ─────────────────────────────────────────────────────────────
; Limit:         10,000,000.00 SAR
; Utilization:   9,652,509.65 SAR
; Available:     347,490.35 SAR
; ─────────────────────────────────────────────────────────────
; Contracts:     1
;   • 3290-H-2025 - 9,652,509.65 SAR ( active )
{:customer-id "7016779188",
 :limit 10000000M,
 :funder "SKFH",
 :utilization 9652509.65M,
 :contracts
 [{:id #uuid "c1283621-0000-0000-0000-000000000001",
   :external-id "3290-H-2025",
   :principal 9652509.65M,
   :status :active}],
 :external-id "PIP-1283621",
 :status :active,
 :id #uuid "f1283621-0000-0000-0000-000000000001",
 :available 347490.35M,
 :created-at #inst "2026-02-02T20:43:22.992-00:00",
 :customer-name "WakeCap Saudi Information Systems Technology Company"}
clj꞉wakecap-test꞉> 
; Execution error (ClassCastException) at datomic.dev-local.tx/datom-lookup-valfn (tx.clj:397).
; class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; Execution error (ClassCastException) at datomic.dev-local.tx/datom-lookup-valfn (tx.clj:397).
; class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; Evaluating file: operations.clj
nil
clj꞉lms.operations꞉> 
; Execution error (ClassCastException) at datomic.dev-local.tx/datom-lookup-valfn (tx.clj:397).
; class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; Execution error (ClassCastException) at datomic.dev-local.tx/datom-lookup-valfn (tx.clj:397).
; class datomic.core.db.Datum cannot be cast to class java.lang.Number (datomic.core.db.Datum is in unnamed module of loader 'app'; java.lang.Number is in module java.base of loader 'bootstrap')
clj꞉wakecap-test꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-03T09:37:58.073Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; Evaluating file: wakecap_test.clj
nil
clj꞉wakecap-test꞉> 
; 2026-02-03T09:38:14.569Z 32f3b319732d INFO [lms.handlers:37] - Database schema installed
; 2026-02-03T09:38:14.611Z 32f3b319732d INFO [lms.handlers:113] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 
; ─── PAYMENT PREVIEW ───
; Amount: 9,652,509.65 SAR
; 
; Before:
;   Outstanding: 10,553,410.56
; 
; After:
;   Outstanding: 900,900.91
;   Credit Balance: 0.00
; 
; Allocations:
;   Installment #6 - Profit: 128700.13 - 128,700.13
;   Installment #7 - Profit: 128700.13 - 128,700.13
;   Installment #8 - Profit: 128700.13 - 128,700.13
;   Installment #9 - Profit: 128700.13 - 128,700.13
;   Installment #10 - Profit: 128700.13 - 128,700.13
;   Installment #11 - Profit: 128700.13 - 128,700.13
;   Installment #12 - Profit: 128700.13 - Principal: 8751608.74 - 8,880,308.87
{:before {:total-outstanding 10553410.56M, :credit-balance 0.00M},
 :after {:total-outstanding 900900.91M, :credit-balance 0.00M},
 :changes
 ({:type :installment,
   :id #uuid "38327cd7-2959-4827-9990-79f255a4622d",
   :seq 6,
   :profit-applied 128700.13M,
   :principal-applied 0M,
   :description "Installment #6 - Profit: 128700.13",
   :amount 128700.13M}
  {:type :installment,
   :id #uuid "1087e6f9-58f3-48fb-a2f7-ca72f4fc89ec",
   :seq 7,
   :profit-applied 128700.13M,
   :principal-applied 0M,
   :description "Installment #7 - Profit: 128700.13",
   :amount 128700.13M}
  {:type :installment,
   :id #uuid "8739f08a-46f5-4629-bb0c-31d338076e81",
   :seq 8,
   :profit-applied 128700.13M,
   :principal-applied 0M,
   :description "Installment #8 - Profit: 128700.13",
   :amount 128700.13M}
  {:type :installment,
   :id #uuid "14ee6dbe-37fa-4566-98a1-5fdcb1e70a9e",
   :seq 9,
   :profit-applied 128700.13M,
   :principal-applied 0M,
   :description "Installment #9 - Profit: 128700.13",
   :amount 128700.13M}
  {:type :installment,
   :id #uuid "99829b97-ef1c-48f4-a1dd-a0e6cb27d5cf",
   :seq 10,
   :profit-applied 128700.13M,
   :principal-applied 0M,
   :description "Installment #10 - Profit: 128700.13",
   :amount 128700.13M}
  {:type :installment,
   :id #uuid "021ed9cc-f54d-414d-a083-236e0df98acd",
   :seq 11,
   :profit-applied 128700.13M,
   :principal-applied 0M,
   :description "Installment #11 - Profit: 128700.13",
   :amount 128700.13M}
  {:type :installment,
   :id #uuid "942cea80-666d-4957-9b4d-5c3878824161",
   :seq 12,
   :profit-applied 128700.13M,
   :principal-applied 8751608.74M,
   :description "Installment #12 - Profit: 128700.13 - Principal: 8751608.74",
   :amount 8880308.87M})}
clj꞉wakecap-test꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-03T15:48:20.921Z 32f3b319732d INFO [lms.core:94] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-03T15:48:24.877Z 32f3b319732d INFO [lms.handlers:37] - Database schema installed
; 2026-02-03T15:48:24.940Z 32f3b319732d INFO [lms.handlers:113] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-03T15:48:52.205Z 32f3b319732d INFO [lms.handlers:208] - Payment recorded {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :amount 50000M, :reference "pay-4", :date #inst "2026-02-03T00:00:00.000-00:00", :note ""}
; 2026-02-03T15:48:52.256Z 32f3b319732d INFO [lms.handlers:113] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
nil
clj꞉lms.core꞉> 
; Execution error (ExceptionInfo) at reitit.exception/exception (exception.cljc:23).
; Router contains conflicting route paths:
; 
; -> /contracts/new 
; -> /contracts/:id 
; 
; -> /contracts/board 
; -> /contracts/:id 
; 
; -> /contracts/board-existing 
; -> /contracts/:id 
; 
; 
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Execution error (ExceptionInfo) at reitit.exception/exception (exception.cljc:23).
; Router contains conflicting route paths:
; 
; -> /contracts/new 
; -> /contracts/:id 
; 
; -> /contracts/board 
; -> /contracts/:id 
; 
; -> /contracts/board-existing 
; -> /contracts/:id 
; 
; 
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-03T21:32:27.541Z 32f3b319732d INFO [lms.core:121] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-03T21:32:40.394Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-03T21:32:40.507Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-03T21:32:42.622Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-03T21:32:45.096Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 1, :filter nil}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-04T21:56:45.165Z 32f3b319732d INFO [lms.core:121] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-04T21:57:03.785Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-04T22:00:05.371Z 32f3b319732d WARN [lms.handlers:452] - Boarding validation failed {:errors [{:field :installment/principal-due, :message "Installment principals sum to 250000.00 but contract principal is 1000000"}]}
; 2026-02-04T22:03:49.602Z 32f3b319732d INFO [lms.boarding:288] - Contract boarded {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:03:49.609Z 32f3b319732d INFO [lms.handlers:447] - Contract boarded via web {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:03:49.695Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:04:39.650Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 2, :filter nil}
; 2026-02-04T22:04:42.021Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-04T22:12:30.866Z 32f3b319732d INFO [lms.core:121] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-04T22:12:34.894Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-04T22:12:34.963Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:12:41.789Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-04T22:23:21.276Z 32f3b319732d INFO [lms.core:123] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-04T22:23:23.707Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-04T22:23:23.755Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-04T22:29:21.743Z 32f3b319732d INFO [lms.core:123] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-04T22:29:25.178Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-04T22:29:25.216Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:29:26.920Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:29:28.733Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:30:13.261Z 32f3b319732d INFO [lms.boarding:496] - Disbursement recorded {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :amount 1000000.00M, :reference "1"}
; 2026-02-04T22:30:13.267Z 32f3b319732d INFO [lms.handlers:635] - Contract originated via web {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :steps [:disbursement]}
; 2026-02-04T22:30:13.327Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:30:16.071Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:30:18.286Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:31:04.665Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 2, :filter nil}
; 2026-02-04T22:31:06.650Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "c1283621-0000-0000-0000-000000000001", :external-id "3290-H-2025"}
; 2026-02-04T22:31:16.591Z 32f3b319732d INFO [lms.handlers:287] - Contract retracted {:contract-id #uuid "c1283621-0000-0000-0000-000000000001", :reason :erroneous-entry}
; 2026-02-04T22:31:16.618Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 1, :filter nil}
; 2026-02-04T22:31:18.745Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-04T22:42:26.370Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-04T22:42:28.816Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-04T22:42:28.833Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:42:36.196Z 32f3b319732d INFO [lms.handlers:687] - Origination retracted {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :reason :correction}
; 2026-02-04T22:42:36.230Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:42:38.053Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:43:00.815Z 32f3b319732d INFO [lms.boarding:479] - Principal allocation recorded {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :amount 50000.00M}
; 2026-02-04T22:43:00.825Z 32f3b319732d INFO [lms.boarding:487] - Deposit from funding recorded {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :amount 50000.00M}
; 2026-02-04T22:43:00.829Z 32f3b319732d INFO [lms.boarding:496] - Disbursement recorded {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :amount 900000.00M, :reference "1"}
; 2026-02-04T22:43:00.830Z 32f3b319732d INFO [lms.handlers:635] - Contract originated via web {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-04T22:43:00.868Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:43:02.511Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:43:04.106Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :external-id "los-1"}
; 2026-02-04T22:43:27.922Z 32f3b319732d INFO [lms.handlers:287] - Contract retracted {:contract-id #uuid "b4f9c266-1111-401a-837f-ddb85ff13f86", :reason :erroneous-entry}
; 2026-02-04T22:43:27.933Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 0, :filter nil}
; 2026-02-04T22:44:41.884Z 32f3b319732d INFO [lms.boarding:288] - Contract boarded {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :external-id "los-1"}
; 2026-02-04T22:44:41.891Z 32f3b319732d INFO [lms.handlers:492] - Contract boarded via web {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :external-id "los-1"}
; 2026-02-04T22:44:41.925Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :external-id "los-1"}
; 2026-02-04T22:44:56.528Z 32f3b319732d INFO [lms.boarding:479] - Principal allocation recorded {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :amount 50000.00M}
; 2026-02-04T22:44:56.536Z 32f3b319732d INFO [lms.boarding:487] - Deposit from funding recorded {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :amount 50000.00M}
; 2026-02-04T22:44:56.539Z 32f3b319732d INFO [lms.boarding:496] - Disbursement recorded {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :amount 900000.00M, :reference "1"}
; 2026-02-04T22:44:56.540Z 32f3b319732d INFO [lms.handlers:635] - Contract originated via web {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-04T22:44:56.585Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-05T16:25:45.379Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-05T16:26:04.290Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-05T16:26:04.361Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :external-id "los-1"}
; 2026-02-05T16:32:59.711Z 32f3b319732d ERROR [lms.handlers:104] - Error viewing contract
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.produce  AdaptiveExecutionStrategy.java: 196
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        0morg.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/3;1mhandle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                        lms.handlers/view-contract-handler                    handlers.clj:  95
;                                                                   lms.contract/get-events                    contract.clj: 171
;                                                             lms.contract/get-admin-events                    contract.clj: 105
;                                                                      datomic.client.api/q                         api.clj: 464
;                                                            datomic.client.api.impl/call-q                        impl.clj: 151
;                                                              datomic.client.api.impl/fn/G                        impl.clj:  41
;                                                                  datomic.core.local-db/fn                    local_db.clj:  28
;                                                          datomic.core.local-query/local-q                 local_query.clj:  58
;                                                                     datomic.core.query/q*                       query.clj: 664
;                                                                 datomic.core.datalog/qsqr                     datalog.clj:1635
;                                                                 datomic.core.datalog/qsqr                     datalog.clj:1678
;                                              datomic.measure.query-stats/with-phase-stats                 query_stats.clj:  61
;                                                              datomic.core.datalog/qsqr/fn                     datalog.clj:1679
;                                                           datomic.core.datalog/eval-query                     datalog.clj:1589
;                                                            datomic.core.datalog/eval-rule                     datalog.clj:1546
;                                                         datomic.core.datalog/eval-rule/fn                     datalog.clj:1561
;                                             datomic.measure.query-stats/with-clause-stats                 query_stats.clj:  40
;                                                     datomic.core.datalog/eval-rule/fn{x2}                     datalog.clj:1561
;                                                          datomic.core.datalog/eval-clause                     datalog.clj:1474
;                                                       datomic.core.datalog/eval-clause/fn                     datalog.clj:1480
;                                                                 datomic.core.datalog/fn/G                     datalog.clj: 358
;                                                                   datomic.core.datalog/fn                     datalog.clj: 394
;                                                                datomic.core.datalog/dbrel                     datalog.clj: 350
;                                                           datomic.core.datalog/resolve-id                     datalog.clj: 340
; java.lang.IllegalArgumentException: Cannot resolve key: [:contract/id #uuid "c1283621-0000-0000-0000-000000000001"]
;         clojure.lang.ExceptionInfo: processing clause: [?tx :tx/contract ?contract], message: Cannot resolve key: [:contract/id #uuid "c1283621-0000-0000-0000-000000000001"]
;     cognitect.anomalies/category: :cognitect.anomalies/incorrect
;      cognitect.anomalies/message: "processing clause: [?tx :tx/contract ?contract], message: Cannot resolve key: [:contract/id #uuid \"c1283621-0000-0000-0000-000000000001\"]"
; 
; 
; 2026-02-05T16:33:02.020Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:03.081Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:04.522Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:05.565Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:10.771Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:11.857Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:16.909Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-05T16:33:29.248Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-05T16:33:31.742Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-05T16:33:31.747Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:35.053Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:35.507Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:36.558Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:33:41.613Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; REPL history clearedclj꞉lms.core꞉> 

; 2026-02-05T16:34:11.728Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:35:11.994Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
; 2026-02-05T16:40:12.383Z 32f3b319732d ERROR [lms.handlers:53] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  44
;                                                                                       ...
; clojure.lang.ArityException: Wrong number of args (2) passed to: lms.contract/list-contracts
; 
; 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-05T16:42:45.749Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-05T16:42:49.152Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-05T16:42:49.234Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:42:49.248Z 32f3b319732d ERROR [lms.handlers:52] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  48
;                                                              lms.views/contract-list-page                       views.clj: 679
;                                                                     lms.views/page-layout                       views.clj:  92
;                                                                     lms.views/page-layout                       views.clj: 101
;                                                                  lms.views/page-layout/fn                       views.clj: 101
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 ┐ (repeats 3 times)
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198 │
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30 │
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198 │
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 │
;                                                             hiccup.compiler/eval447731/fn                    compiler.clj: 194 │
;                                                            hiccup.compiler/render-element                    compiler.clj: 187 ┘
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  29
;                                                                                       ...
;                                                     lms.views/contract-list-table/iter/fn                       views.clj: 666
;                                                                    lms.views/status-badge                       views.clj:  86
;                                                                         clojure.core/name                        core.clj:1610
; java.lang.NullPointerException: Cannot invoke "clojure.lang.Named.getName()" because "x" is null
; 
; 
; 2026-02-05T16:42:54.126Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:42:54.133Z 32f3b319732d ERROR [lms.handlers:52] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  48
;                                                              lms.views/contract-list-page                       views.clj: 679
;                                                                     lms.views/page-layout                       views.clj:  92
;                                                                     lms.views/page-layout                       views.clj: 101
;                                                                  lms.views/page-layout/fn                       views.clj: 101
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 ┐ (repeats 3 times)
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198 │
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30 │
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198 │
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 │
;                                                             hiccup.compiler/eval447731/fn                    compiler.clj: 194 │
;                                                            hiccup.compiler/render-element                    compiler.clj: 187 ┘
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  29
;                                                                                       ...
;                                                     lms.views/contract-list-table/iter/fn                       views.clj: 666
;                                                                    lms.views/status-badge                       views.clj:  86
;                                                                         clojure.core/name                        core.clj:1610
; java.lang.NullPointerException: Cannot invoke "clojure.lang.Named.getName()" because "x" is null
; 
; 
; 2026-02-05T16:42:55.230Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:42:55.232Z 32f3b319732d ERROR [lms.handlers:52] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  48
;                                                              lms.views/contract-list-page                       views.clj: 679
;                                                                     lms.views/page-layout                       views.clj:  92
;                                                                     lms.views/page-layout                       views.clj: 101
;                                                                  lms.views/page-layout/fn                       views.clj: 101
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 ┐ (repeats 3 times)
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198 │
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30 │
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198 │
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 │
;                                                             hiccup.compiler/eval447731/fn                    compiler.clj: 194 │
;                                                            hiccup.compiler/render-element                    compiler.clj: 187 ┘
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  29
;                                                                                       ...
;                                                     lms.views/contract-list-table/iter/fn                       views.clj: 666
;                                                                    lms.views/status-badge                       views.clj:  86
;                                                                         clojure.core/name                        core.clj:1610
; java.lang.NullPointerException: Cannot invoke "clojure.lang.Named.getName()" because "x" is null
; 
; 
; 2026-02-05T16:43:00.587Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:43:00.612Z 32f3b319732d ERROR [lms.handlers:52] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/3;1mfn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  48
;                                                              lms.views/contract-list-page                       views.clj: 679
;                                                                     lms.views/page-layout                       views.clj:  92
;                                                                     lms.views/page-layout                       views.clj: 101
;                                                                  lms.views/page-layout/fn                       views.clj: 101
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 ┐ (repeats 3 times)
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198 │
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30 │
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198 │
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 │
;                                                             hiccup.compiler/eval447731/fn                    compiler.clj: 194 │
;                                                            hiccup.compiler/render-element                    compiler.clj: 187 ┘
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  29
;                                                                                       ...
;                                                     lms.views/contract-list-table/iter/fn                       views.clj: 666
;                                                                    lms.views/status-badge                       views.clj:  86
;                                                                         clojure.core/name                        core.clj:1610
; java.lang.NullPointerException: Cannot invoke "clojure.lang.Named.getName()" because "x" is null
; 
; 
; 2026-02-05T16:43:30.956Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:43:30.962Z 32f3b319732d ERROR [lms.handlers:52] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  48
;                                                              lms.views/contract-list-page                       views.clj: 679
;                                                                     lms.views/page-layout                       views.clj:  92
;                                                                     lms.views/page-layout                       views.clj: 101
;                                                                  lms.views/page-layout/fn                       views.clj: 101
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 ┐ (repeats 3 times)
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198 │
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30 │
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198 │
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 │
;                                                             hiccup.compiler/eval447731/fn                    compiler.clj: 194 │
;                                                            hiccup.compiler/render-element                    compiler.clj: 187 ┘
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  29
;                                                                                       ...
;                                                     lms.views/contract-list-table/iter/fn                       views.clj: 666
;                                                                    lms.views/status-badge                       views.clj:  86
;                                                                         clojure.core/name                        core.clj:1610
; java.lang.NullPointerException: Cannot invoke "clojure.lang.Named.getName()" because "x" is null
; 
; 
; 2026-02-05T16:44:31.266Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:44:31.276Z 32f3b319732d ERROR [lms.handlers:52] - Error listing contracts
;                                                                      java.lang.Thread.run                     Thread.java:1474
;                                 org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run           QueuedThreadPool.java:1184
;                            org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob           QueuedThreadPool.java:1229
;                                     org.eclipse.jetty.util.thread.QueuedThreadPool.runJob           QueuedThreadPool.java: 999
;                   org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run     ReservedThreadExecutor.java: 312
;                      org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run  AdaptiveExecutionStrategy.java: 202
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce  AdaptiveExecutionStrategy.java: 297
;              org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask  AdaptiveExecutionStrategy.java: 447
;               org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.epcRunTask  AdaptiveExecutionStrategy.java: 492
;                  org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask  AdaptiveExecutionStrategy.java: 521
;                                      org.eclipse.jetty.io.SelectableChannelEndPoint$1.run  SelectableChannelEndPoint.java:  54
;                                                org.eclipse.jetty.io.FillInterest.fillable               FillInterest.java:  99
;               org.eclipse.jetty.server.internal.HttpConnection$FillableCallback.succeeded             HttpConnection.java:1819
;                               org.eclipse.jetty.server.internal.HttpConnection.onFillable             HttpConnection.java: 411
;                     org.eclipse.jetty.server.internal.HttpChannelState$HandlerInvoker.run           HttpChannelState.java: 682
;                                                    org.eclipse.jetty.server.Server.handle                     Server.java: 182
;                                    org.eclipse.jetty.server.handler.ContextHandler.handle             ContextHandler.java:1174
; org.eclipse.jetty.ee9.nested.ContextHandler$CoreContextHandler$CoreToNestedHandler.handle             ContextHandler.java:3048
;                                           org.eclipse.jetty.ee9.nested.HttpChannel.handle                HttpChannel.java: 520
;                                         org.eclipse.jetty.ee9.nested.HttpChannel.dispatch                HttpChannel.java: 733
;                     org.eclipse.jetty.ee9.nested.HttpChannel$RequestDispatchable.dispatch                HttpChannel.java:1581
;                                        org.eclipse.jetty.ee9.nested.ContextHandler.handle             ContextHandler.java:1723
;                                         org.eclipse.jetty.ee9.nested.ScopedHandler.handle              ScopedHandler.java: 123
;                                       org.eclipse.jetty.ee9.nested.ContextHandler.doScope             ContextHandler.java: 962
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 160
;    ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doScope                                
;                                      org.eclipse.jetty.ee9.servlet.ServletHandler.doScope             ServletHandler.java: 483
;                                      org.eclipse.jetty.ee9.nested.ScopedHandler.nextScope              ScopedHandler.java: 162
;                                      org.eclipse.jetty.ee9.nested.ContextHandler.doHandle             ContextHandler.java:1041
;                                     org.eclipse.jetty.ee9.nested.ScopedHandler.nextHandle              ScopedHandler.java: 193
;   ring.adapter.jetty.proxy$org.eclipse.jetty.ee9.servlet.ServletHandler$ff19274a.doHandle                                
;                                                       ring.adapter.jetty/proxy-handler/fn                       jetty.clj: 115
;                                                ring.middleware.x-headers/wrap-x-header/fn                   x_headers.clj:  22 ─ (repeats 2 times)
;                                     ring.middleware.content-length/wrap-content-length/fn              content_length.clj:  50
;                                         ring.middleware.not-modified/wrap-not-modified/fn                not_modified.clj:  66
;                                   ring.middleware.default-charset/wrap-default-charset/fn             default_charset.clj:  31
;                                         ring.middleware.content-type/wrap-content-type/fn                content_type.clj:  39
;                                ring.middleware.resource/wrap-resource-prefer-resources/fn                    resource.clj:  25
;                                                   ring.middleware.cookies/wrap-cookies/fn                     cookies.clj: 198
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                 ring.middleware.multipart-params/wrap-multipart-params/fn            multipart_params.clj: 192
;                                ring.middleware.multipart-params/handle-request-and-errors            multipart_params.clj: 138
;                         ring.middleware.multipart-params/handle-request-and-errors/fn{x2}            multipart_params.clj: 140
;                                       ring.middleware.nested-params/wrap-nested-params/fn               nested_params.clj:  89
;                                     ring.middleware.keyword-params/wrap-keyword-params/fn              keyword_params.clj:  53
;                                                   ring.middleware.session/wrap-session/fn                     session.clj: 112
;                                                       ring.middleware.flash/wrap-flash/fn                       flash.clj:  39
;                                      ring.websocket.keepalive/wrap-websocket-keepalive/fn                   keepalive.clj:  56
;                                                                     lms.core/wrap-conn/fn                        core.clj:  89
;                                                     ring.middleware.params/wrap-params/fn                      params.clj:  75
;                                                                                       ...
;                                                               reitit.ring/ring-handler/fn                       ring.cljc: 388
;                                                       lms.handlers/list-contracts-handler                    handlers.clj:  48
;                                                              lms.views/contract-list-page                       views.clj: 679
;                                                                     lms.views/page-layout                       views.clj:  92
;                                                                     lms.views/page-layout                       views.clj: 101
;                                                                  lms.views/page-layout/fn                       views.clj: 101
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 ┐ (repeats 3 times)
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198 │
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30 │
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198 │
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177 │
;                                                             hiccup.compiler/eval447731/fn                    compiler.clj: 194 │
;                                                            hiccup.compiler/render-element                    compiler.clj: 187 ┘
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  30
;                                                         hiccup.compiler/eval447735/fn{x2}                    compiler.clj: 198
;                                                           hiccup.compiler/eval447700/fn/G                    compiler.clj: 177
;                                                             hiccup.compiler/eval447735/fn                    compiler.clj: 198
;                                                                  hiccup.compiler/iterate!                    compiler.clj:  29
;                                                                                       ...
;                                                     lms.views/contract-list-table/iter/fn                       views.clj: 666
;                                                                    lms.views/status-badge                       views.clj:  86
;                                                                         clojure.core/name                        core.clj:1610
; java.lang.NullPointerException: Cannot invoke "clojure.lang.Named.getName()" because "x" is null
; 
; 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-05T16:48:53.059Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-05T16:48:55.795Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-05T16:48:55.869Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 1}
; 2026-02-05T16:48:58.381Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :external-id "los-1"}
; 2026-02-05T16:49:05.259Z 32f3b319732d INFO [lms.handlers:286] - Contract retracted {:contract-id #uuid "58397b3d-b7d4-43ca-9e92-5c5e094273ef", :reason :erroneous-entry}
; 2026-02-05T16:49:05.300Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 0}
; 2026-02-05T16:50:46.430Z 32f3b319732d INFO [lms.boarding:287] - Contract boarded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-05T16:50:46.434Z 32f3b319732d INFO [lms.handlers:489] - Contract boarded via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-05T16:50:46.500Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:46:30.658Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T08:47:03.675Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T08:47:03.768Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:47:19.725Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 25000.00M}
; 2026-02-06T08:47:19.729Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 100000.00M}
; 2026-02-06T08:47:19.737Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 875000.00M, :reference "1"}
; 2026-02-06T08:47:19.738Z 32f3b319732d INFO [lms.handlers:632] - Contract originated via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T08:47:19.783Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:47:22.788Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:48:13.044Z 32f3b319732d INFO [lms.handlers:345] - Settlement calculated {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :date "2026-02-06", :penalty-days 0, :settlement-amount 1000714.28571428571428571M}
; 2026-02-06T08:48:29.387Z 32f3b319732d INFO [lms.handlers:345] - Settlement calculated {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :date "2026-02-06", :penalty-days 90, :settlement-amount 1061999.99999999999999971M}
; 2026-02-06T08:48:51.804Z 32f3b319732d INFO [lms.handlers:345] - Settlement calculated {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :date "2026-02-06", :penalty-days 0, :settlement-amount 1000714.28571428571428571M}
; 2026-02-06T08:48:57.857Z 32f3b319732d INFO [lms.handlers:345] - Settlement calculated {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :date "2026-02-06", :penalty-days 30, :settlement-amount 1021999.99999999999999971M}
; 2026-02-06T08:49:18.391Z 32f3b319732d INFO [lms.handlers:345] - Settlement calculated {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :date "2026-02-06", :penalty-days 28, :settlement-amount 1020666.66666666666666671M}
; 2026-02-06T08:49:23.428Z 32f3b319732d INFO [lms.handlers:345] - Settlement calculated {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :date "2026-02-06", :penalty-days 29, :settlement-amount 1021333.33333333333333271M}
; 2026-02-06T08:49:50.180Z 32f3b319732d INFO [lms.handlers:684] - Origination retracted {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :reason :correction}
; 2026-02-06T08:49:50.259Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:49:51.781Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:51:19.558Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 25000.00M}
; 2026-02-06T08:51:19.582Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 100000.00M}
; 2026-02-06T08:51:19.614Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 875000.00M, :reference "1"}
; 2026-02-06T08:51:19.616Z 32f3b319732d INFO [lms.handlers:632] - Contract originated via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T08:51:19.710Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:51:31.536Z 32f3b319732d INFO [lms.handlers:684] - Origination retracted {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :reason :correction}
; 2026-02-06T08:51:31.580Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:51:32.909Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:51:38.026Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:52:10.427Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 25000.00M}
; 2026-02-06T08:52:10.445Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 100000.00M}
; 2026-02-06T08:52:10.460Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 875000.00M, :reference "1"}
; 2026-02-06T08:52:10.464Z 32f3b319732d INFO [lms.handlers:632] - Contract originated via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T08:52:10.552Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:52:13.017Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:52:14.216Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:52:16.091Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T08:53:19.093Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#object[org.eclipse.jetty.server.Server 0x6da57911 "oejs.Server@6da57911{STARTED}[12.1.0,sto=0]"]
clj꞉lms.core꞉> 
; 2026-02-06T08:53:22.410Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T08:53:22.475Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:53:30.183Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:53:34.698Z 32f3b319732d INFO [lms.handlers:684] - Origination retracted {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :reason :correction}
; 2026-02-06T08:53:34.734Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:53:36.517Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:53:45.404Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 25000.00M}
; 2026-02-06T08:53:45.416Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 100000.00M}
; 2026-02-06T08:53:45.426Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 875000.00M, :reference "1"}
; 2026-02-06T08:53:45.428Z 32f3b319732d INFO [lms.handlers:632] - Contract originated via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T08:53:45.473Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:53:51.134Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:53:52.486Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:54:05.802Z 32f3b319732d INFO [lms.handlers:684] - Origination retracted {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :reason :correction}
; 2026-02-06T08:54:05.839Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:54:07.563Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:54:16.705Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 25000.00M}
; 2026-02-06T08:54:16.712Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 100000.00M}
; 2026-02-06T08:54:16.727Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 875000.00M, :reference "1"}
; 2026-02-06T08:54:16.728Z 32f3b319732d INFO [lms.handlers:632] - Contract originated via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T08:54:16.805Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:54:20.170Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T08:54:21.470Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
;; 1. Reinstall schema to add the new attribute
(require '[lms.db :as db])
(def conn (db/get-connection))
(db/install-schema conn)

;; 2. Check if an existing contract has the field set
(require '[datomic.client.api :as d])
(d/pull (d/db conn) [:contract/days-to-first-installment] [:contract/id "f14ad18e-9407-4b0e-916a-78e072e86638"])
;; If this returns nil or empty, the contract wasn't boarded with this field
nil
clj꞉lms.core꞉> 
#'lms.core/conn
clj꞉lms.core꞉> 
{:db-before
 #datomic.core.db.Db{:id "lms", :basisT 71, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :db-after
 #datomic.core.db.Db{:id "lms", :basisT 72, :indexBasisT 0, :index-root-id nil, :asOfT nil, :sinceT nil, :raw nil},
 :tx-data [#datom[13194139533384 50 #inst "2026-02-06T09:45:34.663-00:00" 13194139533384 true]],
 :tempids {}}
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Syntax error compiling at (.calva/repl.calva-repl:8175:1).
; Unable to resolve symbol: your-contract-uuid in this context
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-02-06T09:46:22.437Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T09:46:33.813Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
; 2026-02-06T09:48:17.150Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-02-06T09:48:38.899Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-02-06T09:50:09.139Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
; 2026-02-06T09:51:11.784Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
; Execution error (BindException) at sun.nio.ch.Net/bind0 (Net.java:-2).
; Address already in use
clj꞉lms.core꞉> 
; Connecting using "deps.edn" project type.
; Connecting ...
; Reading port file: file:///usr/src/app/.nrepl-port ...
; Using host:port localhost:7888 ...
; Hooking up nREPL sessions on port 7888...
; Connected session: clj, port: 7888
; Evaluating code from settings: 'calva.autoEvaluateCode.onConnect.clj'
nil
clj꞉user꞉> 
"Please see https://calva.io/output/#about-stdout-in-the-repl-window
about why stdout printed to this file is prepended with `;` to be line comments."
clj꞉user꞉> 
; 2026-02-06T09:55:01.777Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T09:55:08.729Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T09:55:08.927Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:14.309Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:19.225Z 32f3b319732d INFO [lms.handlers:684] - Origination retracted {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :reason :correction}
; 2026-02-06T09:55:19.262Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:20.582Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:29.693Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 25000.00M}
; 2026-02-06T09:55:29.699Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 100000.00M}
; 2026-02-06T09:55:29.715Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :amount 875000.00M, :reference "1"}
; 2026-02-06T09:55:29.718Z 32f3b319732d INFO [lms.handlers:632] - Contract originated via web {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T09:55:29.771Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:33.053Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:34.642Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:55:35.522Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :external-id "LOS-1"}
; 2026-02-06T09:56:08.985Z 32f3b319732d INFO [lms.handlers:286] - Contract retracted {:contract-id #uuid "f14ad18e-9407-4b0e-916a-78e072e86638", :reason :correction}
; 2026-02-06T09:56:09.023Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 0}
; 2026-02-06T09:59:49.443Z 32f3b319732d INFO [lms.handlers:45] - Listed contracts {:count 0}
nil
clj꞉lms.core꞉> 
; Syntax error compiling at (src/lms/core.clj:143:3).
; Unable to resolve symbol: reload! in this context
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Evaluating file: core.clj
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; Syntax error compiling at (src/lms/core.clj:143:3).
; Unable to resolve symbol: reload! in this context
clj꞉lms.core꞉> 
#'lms.core/reload!
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T10:10:14.230Z 32f3b319732d INFO [lms.core:124] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T10:10:17.863Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T10:10:52.934Z 32f3b319732d INFO [lms.boarding:293] - Contract boarded {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
; 2026-02-06T10:10:52.938Z 32f3b319732d INFO [lms.handlers:492] - Contract boarded via web {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
; 2026-02-06T10:10:53.052Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
; 2026-02-06T10:11:05.016Z 32f3b319732d INFO [lms.boarding:484] - Principal allocation recorded {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :amount 25000.00M}
; 2026-02-06T10:11:05.026Z 32f3b319732d INFO [lms.boarding:492] - Deposit from funding recorded {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :amount 100000.00M}
; 2026-02-06T10:11:05.038Z 32f3b319732d INFO [lms.boarding:501] - Disbursement recorded {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :amount 875000.00M, :reference "1"}
; 2026-02-06T10:11:05.039Z 32f3b319732d INFO [lms.handlers:635] - Contract originated via web {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T10:11:05.134Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T10:23:59.346Z 32f3b319732d INFO [lms.core:125] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T10:24:06.617Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T10:24:06.668Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
; 2026-02-06T10:24:20.149Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
; 2026-02-06T10:25:23.221Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T10:32:08.347Z 32f3b319732d INFO [lms.core:125] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T10:32:10.864Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T10:32:10.917Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :external-id "los-1"}
; 2026-02-06T10:32:12.748Z 32f3b319732d INFO [lms.handlers:770] - History tab loaded {:contract-id #uuid "64551601-06ec-4eef-b1aa-186ca946b335", :total-txs 4, :page 1}
nil
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T16:09:01.009Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-02-06T16:09:37.672Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T16:10:11.901Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T16:10:48.643Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T16:10:48.728Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 1}
; 2026-02-06T16:10:57.462Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 0, :type nil}
; 2026-02-06T16:10:59.367Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 1}
; 2026-02-06T16:11:00.169Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 0, :type nil}
; 2026-02-06T16:11:20.099Z 32f3b319732d WARN [lms.handlers:862] - Party validation failed {:errors {:valid? true}}
; 2026-02-06T16:11:30.786Z 32f3b319732d WARN [lms.handlers:862] - Party validation failed {:errors {:valid? true}}
; 2026-02-06T16:11:42.594Z 32f3b319732d WARN [lms.handlers:862] - Party validation failed {:errors {:valid? true}}
; 2026-02-06T16:15:47.779Z 32f3b319732d WARN [lms.handlers:862] - Party validation failed {:errors {:valid? true}}
; 2026-02-06T16:15:50.124Z 32f3b319732d WARN [lms.handlers:862] - Party validation failed {:errors {:valid? true}}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T16:16:03.377Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T16:16:39.334Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T16:16:39.346Z 32f3b319732d INFO [lms.handlers:869] - Party created {:party-id #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :type :party.type/company, :name "aziz co "}
; 2026-02-06T16:16:39.401Z 32f3b319732d INFO [lms.handlers:910] - Viewed party {:id #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :name "aziz co "}
; 2026-02-06T16:16:54.068Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 1, :type nil}
; 2026-02-06T16:16:57.621Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 1, :type nil}
; 2026-02-06T16:17:00.478Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 1}
; 2026-02-06T16:17:01.910Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 1, :type nil}
; 2026-02-06T16:17:22.473Z 32f3b319732d INFO [lms.handlers:910] - Viewed party {:id #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :name "aziz co "}
; 2026-02-06T16:17:43.914Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 1, :type nil}
; 2026-02-06T16:18:08.811Z 32f3b319732d INFO [lms.handlers:869] - Party created {:party-id #uuid "57f20b21-f178-46ed-b6f8-c7ec19216302", :type :party.type/person, :name "Aziz"}
; 2026-02-06T16:18:08.837Z 32f3b319732d INFO [lms.handlers:910] - Viewed party {:id #uuid "57f20b21-f178-46ed-b6f8-c7ec19216302", :name "Aziz"}
; 2026-02-06T16:18:10.891Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 2, :type nil}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T16:42:53.285Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T16:43:21.827Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T16:43:21.854Z 32f3b319732d INFO [lms.handlers:910] - Viewed party {:id #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :name "aziz co "}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T16:45:49.692Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T16:46:30.382Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T16:46:30.404Z 32f3b319732d INFO [lms.handlers:910] - Viewed party {:id #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :name "aziz co "}
; 2026-02-06T16:46:55.057Z 32f3b319732d INFO [lms.handlers:1115] - Ownership recorded {:company #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :owner #uuid "57f20b21-f178-46ed-b6f8-c7ec19216302", :pct 100M}
; 2026-02-06T16:46:55.086Z 32f3b319732d INFO [lms.handlers:910] - Viewed party {:id #uuid "b0fdbc95-45b3-43b1-b5e0-3c61da021452", :name "aziz co "}
; 2026-02-06T16:46:58.887Z 32f3b319732d INFO [lms.handlers:806] - Listed parties {:count 2, :type nil}
; 2026-02-06T16:47:05.170Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 1}
; 2026-02-06T16:47:52.069Z 32f3b319732d INFO [lms.boarding:292] - Contract boarded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-06T16:47:52.078Z 32f3b319732d INFO [lms.handlers:493] - Contract boarded via web {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-06T16:47:52.125Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-06T16:48:19.651Z 32f3b319732d INFO [lms.boarding:483] - Principal allocation recorded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :amount 50000.00M}
; 2026-02-06T16:48:19.660Z 32f3b319732d INFO [lms.boarding:491] - Deposit from funding recorded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :amount 100000.00M}
; 2026-02-06T16:48:19.679Z 32f3b319732d INFO [lms.boarding:500] - Disbursement recorded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :amount 850000.00M, :reference "1"}
; 2026-02-06T16:48:19.679Z 32f3b319732d INFO [lms.handlers:636] - Contract originated via web {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T16:48:19.729Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-06T16:48:22.124Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-06T16:48:23.902Z 32f3b319732d INFO [lms.handlers:771] - History tab loaded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :total-txs 4, :page 1}
; 2026-02-06T16:49:40.188Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 2}
; 2026-02-06T16:50:23.330Z 32f3b319732d INFO [lms.boarding:292] - Contract boarded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T16:50:23.333Z 32f3b319732d INFO [lms.handlers:493] - Contract boarded via web {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T16:50:23.360Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T16:50:31.475Z 32f3b319732d INFO [lms.boarding:483] - Principal allocation recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 50000.00M}
; 2026-02-06T16:50:31.480Z 32f3b319732d INFO [lms.boarding:491] - Deposit from funding recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 100000.00M}
; 2026-02-06T16:50:31.488Z 32f3b319732d INFO [lms.boarding:500] - Disbursement recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 850000.00M, :reference "1"}
; 2026-02-06T16:50:31.488Z 32f3b319732d INFO [lms.handlers:636] - Contract originated via web {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :steps [:principal-allocation :deposit-from-funding :disbursement]}
; 2026-02-06T16:50:31.526Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T16:50:53.292Z 32f3b319732d INFO [lms.handlers:771] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 4, :page 1}
nil
clj꞉lms.core꞉> 
:reloaded
clj꞉lms.core꞉> 
; 2026-02-06T21:52:53.734Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T21:53:16.916Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T21:53:16.960Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T21:53:23.208Z 32f3b319732d INFO [lms.handlers:699] - Origination retracted {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :reason :correction}
; 2026-02-06T21:53:23.242Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T21:53:24.748Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T21:53:51.532Z 32f3b319732d INFO [lms.boarding:500] - Deposit from funding recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 100000.00M}
; 2026-02-06T21:53:51.538Z 32f3b319732d INFO [lms.boarding:509] - Installment prepayment recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 20000M}
; 2026-02-06T21:53:51.549Z 32f3b319732d INFO [lms.boarding:518] - Disbursement recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 880000.00M, :reference "1"}
; 2026-02-06T21:53:51.550Z 32f3b319732d INFO [lms.handlers:647] - Contract originated via web {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :steps [:deposit-from-funding :installment-prepayment :disbursement]}
; 2026-02-06T21:53:51.598Z 32f3b319732d INFO [lms.handlers:96] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T21:54:00.694Z 32f3b319732d INFO [lms.handlers:782] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 9, :page 1}
:reloaded
clj꞉lms.core꞉> 
nil
clj꞉lms.core꞉> 
; 2026-02-06T22:01:11.220Z 32f3b319732d INFO [lms.core:139] - Starting server on port 3001
#'lms.core/server
clj꞉lms.core꞉> 
; 2026-02-06T22:01:13.093Z 32f3b319732d INFO [lms.core:82] - Database schema installed
; 2026-02-06T22:01:13.122Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T22:01:20.655Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 9, :page 1}
; 2026-02-06T22:01:25.017Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 0, :page 1}
; 2026-02-06T22:01:27.500Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 3, :page 1}
; 2026-02-06T22:01:30.060Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 2, :page 1}
; 2026-02-06T22:01:34.246Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 3, :page 1}
; 2026-02-06T22:01:44.625Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 3, :page 1}
; 2026-02-06T22:01:49.369Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 3, :page 1}
; 2026-02-06T22:02:00.471Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 9, :page 1}
; 2026-02-06T22:02:40.969Z 32f3b319732d INFO [lms.handlers:698] - Origination retracted {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :reason :correction}
; 2026-02-06T22:02:41.011Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T22:02:54.329Z 32f3b319732d INFO [lms.boarding:500] - Deposit from funding recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 100000.00M}
; 2026-02-06T22:02:54.346Z 32f3b319732d INFO [lms.boarding:518] - Disbursement recorded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :amount 900000.00M, :reference "1"}
; 2026-02-06T22:02:54.348Z 32f3b319732d INFO [lms.handlers:646] - Contract originated via web {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :steps [:deposit-from-funding :disbursement]}
; 2026-02-06T22:02:54.384Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T22:02:56.027Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :external-id "LOS-3"}
; 2026-02-06T22:02:58.521Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "f309aa16-85dc-4059-bd8e-fb62652a9748", :total-txs 13, :page 1}
; 2026-02-06T22:03:24.527Z 32f3b319732d INFO [lms.handlers:46] - Listed contracts {:count 3}
; 2026-02-06T22:03:27.683Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-07T09:24:40.890Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :total-txs 4, :page 1}
; 2026-02-07T09:24:42.499Z 32f3b319732d INFO [lms.handlers:95] - Viewed contract {:id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :external-id "LOS-2"}
; 2026-02-07T09:24:44.352Z 32f3b319732d INFO [lms.handlers:781] - History tab loaded {:contract-id #uuid "b10ec600-19e8-4463-917d-502b1f40edcb", :total-txs 4, :page 1}
